(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{44:function(e,t,c){},73:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c(20),a=c.n(r),s=c(4),o=c(10),i=c(6),l=c(2),d=c(3),j="http://localhost:8000",u=function(e){if("undefined"!==typeof window)return localStorage.removeItem("jwt"),e(),fetch("".concat(j,"/signout"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))},b=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},m=c(0),h=function(e,t){return e.location.pathname===t?{color:"#ff9900"}:{color:"#ffffff"}},p=Object(o.f)((function(e){var t=e.history;return Object(m.jsx)("div",{children:Object(m.jsxs)("ul",{className:"nav nav-tabs bg-primary",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(s.b,{className:"nav-link",style:h(t,"/"),to:"/",children:"Home"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(s.b,{className:"nav-link",style:h(t,"/shop"),to:"/shop",children:"Shop"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsxs)(s.b,{className:"nav-link",style:h(t,"/cart"),to:"/cart",children:["Cart",Object(m.jsx)("sup",{children:Object(m.jsxs)("small",{className:"cart-badge",children:[" ","undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")).length:0," "]})})]})}),b()&&0===b().user.role&&Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(s.b,{className:"nav-link",style:h(t,"/user/dashboard"),to:"/user/dashboard",children:"Dashboard"})}),b()&&1===b().user.role&&Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(s.b,{className:"nav-link",style:h(t,"/admin/dashboard"),to:"/admin/dashboard",children:"Dashboard"})}),!b()&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(s.b,{className:"nav-link",style:h(t,"/signin"),to:"/signin",children:"Signin"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(s.b,{className:"nav-link",style:h(t,"/signup"),to:"/signup",children:"Signup"})})]}),b()&&Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(s.b,{className:"nav-link",style:{cursor:"pointer",color:"#ffffff"},onClick:u,to:"/",children:"Signout"})})]})})})),O=(c(44),function(e){var t=e.title,c=void 0===t?"Title":t,n=e.description,r=void 0===n?"Description":n,a=e.className,s=e.children;return Object(m.jsxs)("div",{children:[Object(m.jsx)(p,{}),Object(m.jsx)("div",{className:"p-5 mb-4 bg-light jumbotron",children:Object(m.jsxs)("div",{className:"container-fluid  text-center py-5",children:[Object(m.jsx)("h2",{className:"display-5 fw-bold ",children:c}),Object(m.jsx)("p",{className:"fs-4",children:r})]})}),Object(m.jsxs)("div",{className:"".concat(a," "),children:[" ",s," "]})]})}),f=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:"",success:!1}),t=Object(d.a)(e,2),c=t[0],r=t[1],a=c.name,o=c.email,u=c.password,b=c.success,h=c.error,p=function(e){return function(t){r(Object(l.a)(Object(l.a)({},c),{},Object(i.a)({error:!1},e,t.target.value)))}},f=function(e){var t;e.preventDefault(),(t={name:a,email:o,password:u},fetch("".concat(j,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))).then((function(e){e.firstError||e.error?r(Object(l.a)(Object(l.a)({},c),{},{error:e.firstError||e.error,success:!1})):r(Object(l.a)(Object(l.a)({},c),{},{name:"",email:"",password:"",error:"",success:!0}))}))};return Object(m.jsxs)(O,{title:"Signup",description:"Signup to Node React E-commerce App",className:"container col-md-8 offset-md-2",children:[Object(m.jsxs)("div",{className:"alert alert-info",style:{display:b?"":"none"},children:["New account is created. Please ",Object(m.jsx)(s.b,{to:"/signin",children:"Signin"})]}),Object(m.jsx)("div",{className:"alert alert-danger",style:{display:h?"":"none"},children:h}),Object(m.jsxs)("form",{children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Name"}),Object(m.jsx)("input",{onChange:p("name"),type:"text",className:"form-control",value:a})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Email"}),Object(m.jsx)("input",{onChange:p("email"),type:"email",className:"form-control",value:o})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Password"}),Object(m.jsx)("input",{onChange:p("password"),type:"password",className:"form-control",value:u})]}),Object(m.jsx)("button",{onClick:f,className:"btn btn-primary mt-2",children:"Submit"})]})]})},x=function(){var e=Object(n.useState)({email:"",password:"",error:"",loading:!1,redirectToReferrer:!1}),t=Object(d.a)(e,2),c=t[0],r=t[1],a=c.email,s=c.password,u=c.loading,h=c.error,p=c.redirectToReferrer,f=b().user,x=function(e){return function(t){r(Object(l.a)(Object(l.a)({},c),{},Object(i.a)({error:!1},e,t.target.value)))}},g=function(e){e.preventDefault(),r(Object(l.a)(Object(l.a)({},c),{},{error:!1,loading:!0})),function(e){return fetch("".concat(j,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}({email:a,password:s}).then((function(e){e.firstError||e.error?r(Object(l.a)(Object(l.a)({},c),{},{error:e.firstError||e.error,loading:!1})):function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){return r(Object(l.a)(Object(l.a)({},c),{},{redirectToReferrer:!0}))}))}))};return Object(m.jsxs)(O,{title:"Signin",description:"Signin to Node React E-commerce App",className:"container col-md-8 offset-md-2",children:[u&&Object(m.jsx)("div",{className:"alert alert-info",children:Object(m.jsx)("h2",{children:"Loading..."})}),Object(m.jsx)("div",{className:"alert alert-danger",style:{display:h?"":"none"},children:h}),Object(m.jsxs)("form",{children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Email"}),Object(m.jsx)("input",{onChange:x("email"),type:"email",className:"form-control",value:a})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Password"}),Object(m.jsx)("input",{onChange:x("password"),type:"password",className:"form-control",value:s})]}),Object(m.jsx)("button",{onClick:g,className:"btn btn-primary mt-2",children:"Submit"})]}),function(){if(p)return f&&1===f.role?Object(m.jsx)(o.a,{to:"/admin/dashboard"}):Object(m.jsx)(o.a,{to:"/user/dashboard"});b()&&o.a}()]})},g=c(29),N=c.n(g),v=function(e){return fetch("".concat(j,"/products?sortBy=").concat(e,"&order=desc&limit=6"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))},y=function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={limit:t,skip:e,filters:c};return fetch("".concat(j,"/products/by/search/"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))},S=function(e){var t=e.item,c=e.url;return Object(m.jsx)("div",{className:"product-img",children:Object(m.jsx)("img",{src:"".concat(j,"/").concat(c,"/photo/").concat(t._id),alt:t.name,className:"mb-3",style:{maxHeight:"100%",maxWidth:"100%"}})})},w=c(11),C=c.n(w),P=function(e){var t=e.product,c=e.showViewbutton,r=void 0===c||c,a=e.showCartButton,i=void 0===a||a,j=e.cartUpdate,u=void 0!==j&&j,b=e.showRemoveProductButton,h=void 0!==b&&b,p=e.setRun,O=void 0===p?function(e){return e}:p,f=e.run,x=void 0===f?void 0:f,g=Object(n.useState)(!1),N=Object(d.a)(g,2),v=N[0],y=N[1],w=Object(n.useState)(t.count),P=Object(d.a)(w,2),k=P[0],T=P[1],A=function(){!function(e,t){var c=[];"undefined"!==typeof window&&localStorage.getItem("cart")&&(c=JSON.parse(localStorage.getItem("cart"))),c.push(Object(l.a)(Object(l.a)({},e),{},{count:1})),c=Array.from(new Set(c.map((function(e){return e._id})))).map((function(e){return c.find((function(t){return t._id===e}))})),localStorage.setItem("cart",JSON.stringify(c)),t()}(t,(function(){y(!0)}))},E=function(e){return function(t){O(!x),T(t.target.value<1?1:t.target.value),t.target.value>=1&&function(e,t){var c=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(c=JSON.parse(localStorage.getItem("cart"))),c.map((function(n,r){n._id===e&&(c[r].count=t)})),localStorage.setItem("cart",JSON.stringify(c)))}(e,t.target.value)}};return Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("div",{className:"card-header name",children:t.name}),Object(m.jsxs)("div",{className:"card-body",children:[function(e){if(e)return Object(m.jsx)(o.a,{to:"/cart"})}(v),Object(m.jsx)(S,{item:t,url:"products"}),Object(m.jsxs)("p",{className:"text-center",children:[" Description: ",t.description," "]}),Object(m.jsxs)("p",{className:"text-center black-10",children:["Price: ",t.price," \u20ac "]}),Object(m.jsxs)("p",{className:"black-9",children:["Category: ",t.category&&t.category.name]}),Object(m.jsxs)("p",{className:"black-8",children:["Added on ",C()(t.createdAt).fromNow()]}),Object(m.jsxs)("div",{className:"d-lg-flex justify-content-evenly text-center",children:[r&&Object(m.jsx)(s.b,{to:"/product/".concat(t._id),children:Object(m.jsx)("button",{className:"btn btn-outline-primary mt-2 mb-2",children:"View Product"})}),function(e,t){return e>0?t&&Object(m.jsxs)("button",{onClick:A,className:"btn btn-outline-warning mt-2 mb-2 position-relative",children:["Add to cart",Object(m.jsx)("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success",children:"In Stock"})]}):t&&Object(m.jsxs)("button",{className:"btn btn-outline-warning position-relative mt-2 mb-2",children:["Add to cart",Object(m.jsx)("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",children:"Out of Stock"})]})}(t.quantity,i),function(e){return e&&Object(m.jsx)("button",{onClick:function(){!function(e,t){var c=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(c=JSON.parse(localStorage.getItem("cart"))),c.map((function(t,n){t._id===e&&c.splice(n,1)})),localStorage.setItem("cart",JSON.stringify(c)))}(t._id),O(!x)},className:"btn btn-outline-danger mt-2 mb-2",children:"Remove Product"})}(h),function(e){return e&&Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"input-group mb-3",children:[Object(m.jsx)("div",{className:"input-group-prepend",children:Object(m.jsx)("span",{className:"input-group-text",children:"Adjust Quantity"})}),Object(m.jsx)("input",{type:"number",className:"form-control",value:k,onChange:E(t._id)})]})})}(u)]})]})]})},k=function(){return fetch("".concat(j,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))},T=function(){var e=Object(n.useState)({categories:[],category:"",search:"",results:[],searched:!1}),t=Object(d.a)(e,2),c=t[0],r=t[1],a=c.categories,s=c.category,o=c.search,u=c.results,b=c.searched,h=function(){console.log(o,s),o&&function(e){var t=N.a.stringify(e);return fetch("".concat(j,"/products/search?").concat(t),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}({search:o||void 0,category:s}).then((function(e){e.error?console.log(e.error):r(Object(l.a)(Object(l.a)({},c),{},{results:e,searched:!0}))}))},p=function(e){e.preventDefault(),h()},O=function(e){return function(t){var n;r(Object(l.a)(Object(l.a)({},c),{},(n={},Object(i.a)(n,e,t.target.value),Object(i.a)(n,"searched",!1),n)))}},f=function(e,t){return e&&t.length>0?"Found ".concat(t.length," products"):e&&t.length<1?"No Products Found":void 0};return Object(n.useEffect)((function(){k().then((function(e){e.error?console.log(e.error):r(Object(l.a)(Object(l.a)({},e),{},{categories:e}))}))}),[]),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"container mb-3",children:Object(m.jsx)("form",{onSubmit:p,children:Object(m.jsxs)("span",{className:"input-group-text",children:[Object(m.jsxs)("div",{className:"input-group",children:[Object(m.jsx)("div",{className:"input-group-prepend",children:Object(m.jsxs)("select",{className:"btn me-2",onChange:O("category"),children:[Object(m.jsx)("option",{defaultValue:!0,value:"All",children:"All"}),a.map((function(e,t){return Object(m.jsx)("option",{value:e._id,children:e.name},t)}))]})}),Object(m.jsx)("input",{type:"search",className:"form-control",onChange:O("search"),placeholder:"search by name"})]}),Object(m.jsx)("div",{className:"btn input-group-apppend",style:{border:"none"},children:Object(m.jsx)("button",{className:"input-group-text",children:"Search"})})]})})}),Object(m.jsx)("div",{className:"container mb-3",children:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{className:"mt-4 mb-4",children:f(b,e)}),Object(m.jsx)("div",{className:"row",children:e.map((function(e,t){return Object(m.jsx)(P,{product:e},t)}))})]})}(u)})]})},A=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)([]),s=Object(d.a)(a,2),o=s[0],i=s[1],l=Object(n.useState)(!1),j=Object(d.a)(l,2),u=j[0],b=j[1];return Object(n.useEffect)((function(){v("createdAt").then((function(e){e.error?b(e.error):i(e)})),u&&console.log(u),v("sold").then((function(e){e.error?b(e.error):r(e)})),u&&console.log(u)}),[]),Object(m.jsxs)(O,{title:"Home Page",description:"Node React E-commerce App",className:"container",children:[Object(m.jsx)(T,{}),Object(m.jsx)("h2",{className:"mb-4",children:" Best Sellers"}),Object(m.jsx)("div",{className:"row",children:c.map((function(e,t){return Object(m.jsx)("div",{className:"col-4 mb-3",children:Object(m.jsx)(P,{product:e},t)},t)}))}),Object(m.jsx)("h2",{className:"mb-4",children:" Newest Products"}),Object(m.jsx)("div",{className:"row",children:o.map((function(e,t){return Object(m.jsx)("div",{className:"col-4 mb-3",children:Object(m.jsx)(P,{product:e})},t)}))})]})},E=c(17),I=["component"],_=function(e){var t=e.component,c=Object(E.a)(e,I);return Object(m.jsx)(o.b,Object(l.a)(Object(l.a)({},c),{},{render:function(e){return b()?Object(m.jsx)(t,Object(l.a)({},e)):Object(m.jsx)(o.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},D=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],r=t[1],a=b().user,o=a._id,i=a.name,l=a.email,u=a.role,h=b().token,p=function(e,t){(function(e,t){return fetch("".concat(j,"/orders/by/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){console.log(e),e.error?console.log(e.error):r(e)}))};Object(n.useEffect)((function(){p(o,h)}),[]);return Object(m.jsx)(O,{title:"Dashboard",description:"G'day ".concat(i),className:"container",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-3",children:Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("h4",{className:"card-header",children:"User Links"}),Object(m.jsxs)("ul",{className:"list-group",children:[Object(m.jsx)("li",{className:"list-group-item",children:Object(m.jsx)(s.b,{className:"nav-link",to:"/cart",children:"My Cart"})}),Object(m.jsx)("li",{className:"list-group-item",children:Object(m.jsx)(s.b,{className:"nav-link",to:"/profile/".concat(o),children:"Update Profile"})})]})]})}),Object(m.jsxs)("div",{className:"col-9",children:[Object(m.jsxs)("div",{className:"card mb-5",children:[Object(m.jsx)("h3",{className:"card-header",children:"User Information"}),Object(m.jsxs)("ul",{className:"list-group",children:[Object(m.jsx)("li",{className:"list-group-item",children:i}),Object(m.jsx)("li",{className:"list-group-item",children:l}),Object(m.jsx)("li",{className:"list-group-item",children:1===u?"Admin":"Registered User"})]})]}),function(e){return Object(m.jsxs)("div",{className:"card mb-5",children:[Object(m.jsx)("h3",{className:"card-header",children:"Purchase history"}),Object(m.jsx)("ul",{className:"list-group",children:Object(m.jsx)("li",{className:"list-group-item",children:e.map((function(e,t){return Object(m.jsxs)("div",{children:[Object(m.jsx)("hr",{}),e.products.map((function(e,t){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("h6",{children:["Product name: ",e.name]}),Object(m.jsxs)("h6",{children:["Product price: ",e.price]}),Object(m.jsxs)("h6",{children:["Purchased date: ",C()(e.createdAt).fromNow()]})]},t)}))]},t)}))})})]})}(c)]})]})})},B=["component"],J=function(e){var t=e.component,c=Object(E.a)(e,B);return Object(m.jsx)(o.b,Object(l.a)(Object(l.a)({},c),{},{render:function(e){return b()&&1===b().user.role?Object(m.jsx)(t,Object(l.a)({},e)):Object(m.jsx)(o.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},q=function(){var e=b().user,t=e.name,c=e.email,n=e.role;return Object(m.jsx)(O,{title:"Dashboard",description:"G'day ".concat(t),className:"container",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-3",children:Object(m.jsxs)("div",{className:"card",children:[Object(m.jsx)("h4",{className:"card-header",children:"Admin Links"}),Object(m.jsxs)("ul",{className:"list-group",children:[Object(m.jsx)("li",{className:"list-group-item",children:Object(m.jsx)(s.b,{className:"nav-link",to:"/create/category",children:"Create Category"})}),Object(m.jsx)("li",{className:"list-group-item",children:Object(m.jsx)(s.b,{className:"nav-link",to:"/create/product",children:"Create Product"})}),Object(m.jsx)("li",{className:"list-group-item",children:Object(m.jsx)(s.b,{className:"nav-link",to:"/admin/orders",children:"View Orders"})}),Object(m.jsx)("li",{className:"list-group-item",children:Object(m.jsx)(s.b,{className:"nav-link",to:"/admin/products",children:"Manage Products"})})]})]})}),Object(m.jsx)("div",{className:"col-9",children:Object(m.jsxs)("div",{className:"card mb-5",children:[Object(m.jsx)("h3",{className:"card-header",children:"User Information"}),Object(m.jsxs)("ul",{className:"list-group",children:[Object(m.jsx)("li",{className:"list-group-item",children:t}),Object(m.jsx)("li",{className:"list-group-item",children:c}),Object(m.jsx)("li",{className:"list-group-item",children:1===n?"Admin":"Registered User"})]})]})})]})})},G=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(!1),o=Object(d.a)(a,2),i=o[0],l=o[1],u=Object(n.useState)(!1),h=Object(d.a)(u,2),p=h[0],f=h[1],x=b(),g=x.user,N=x.token,v=function(e){l(""),r(e.target.value)},y=function(e){e.preventDefault(),l(""),f(!1),function(e,t,c){return fetch("".concat(j,"/category/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(c)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(g._id,N,{name:c}).then((function(e){console.log(e),e.error?l(!0):(l(""),f(!0))}))};return Object(m.jsxs)(O,{title:"Add a new category",description:"G'day ".concat(g.name,", ready to add a new category?"),className:"container",children:[Object(m.jsx)("div",{className:"alert alert-danger",style:{display:i?"":"none"},children:Object(m.jsx)("h3",{children:" Category should be unique "})}),p&&Object(m.jsx)("div",{className:"alert alert-success",children:Object(m.jsxs)("h3",{children:[c," was created"]})}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-8 offset-md-2",children:Object(m.jsx)("form",{children:Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-mute"}),Object(m.jsx)("input",{type:"text",className:"form-control",onChange:v,value:c,autoFocus:!0,required:!0}),Object(m.jsx)("button",{className:"btn btn-outline-primary mt-2",onClick:y,children:"Create Category"})]})})})}),Object(m.jsx)("div",{className:"mt-5",children:Object(m.jsx)(s.b,{to:"/admin/dashboard",className:"text-warning",children:"Back to Dashboard"})})]})},z=function(){var e=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:"",createdProduct:"",redirectToProfile:!1,formData:""}),t=Object(d.a)(e,2),c=t[0],r=t[1],a=b(),s=a.user,o=a.token,u=c.name,h=c.description,p=c.price,f=c.categories,x=c.quantity,g=c.loading,N=c.error,v=c.createdProduct,y=c.formData;Object(n.useEffect)((function(){k().then((function(e){e.error?r(Object(l.a)(Object(l.a)({},c),{},{error:e.error})):r(Object(l.a)(Object(l.a)({},c),{},{categories:e,formData:new FormData}))}))}),[]);var S=function(e){return function(t){var n="photo"===e?t.target.files[0]:t.target.value;y.set(e,n),r(Object(l.a)(Object(l.a)({},c),{},Object(i.a)({},e,n)))}},w=function(e){e.preventDefault(),r(Object(l.a)(Object(l.a)({},c),{},{error:"",loading:!0})),function(e,t,c){return fetch("".concat(j,"/product/create/").concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:c}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(s._id,o,y).then((function(e){e.error?r(Object(l.a)(Object(l.a)({},c),{},{error:e.error})):r(Object(l.a)(Object(l.a)({},c),{},{name:"",description:"",price:"",shipping:"",quantity:"",photo:"",loading:!1,createdProduct:e.name}))}))};return Object(m.jsxs)(O,{title:"Add a new category",description:"G'day ".concat(s.name,", ready to add a new category?"),className:"container",children:[Object(m.jsx)("div",{className:"alert alert-danger",style:{display:N?"":"none"},children:Object(m.jsxs)("h3",{children:[" ",N," "]})}),v&&Object(m.jsx)("div",{className:"alert alert-success",children:Object(m.jsxs)("h3",{children:[v," was created"]})}),g&&Object(m.jsx)("div",{className:"alert alert-info",children:Object(m.jsx)("h3",{children:"Loading..."})}),Object(m.jsxs)("form",{className:"mb-3",onSubmit:w,children:[Object(m.jsx)("h4",{children:"Post Photo"}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("label",{className:"btn btn-secondary",children:Object(m.jsx)("input",{type:"file",name:"photo",accept:"image/*",onChange:S("photo"),required:!0})})}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:" Name "}),Object(m.jsx)("input",{className:"form-control",value:u,onChange:S("name"),type:"text",required:!0})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Description"}),Object(m.jsx)("textarea",{className:"form-control",value:h,onChange:S("description"),required:!0})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Price"}),Object(m.jsx)("input",{className:"form-control",value:p,onChange:S("price"),type:"number",required:!0})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Category"}),Object(m.jsxs)("select",{className:"form-control",onChange:S("category"),required:!0,children:[Object(m.jsx)("option",{defaultValue:!0,children:"---- Please Select ----"}),f&&f.map((function(e,t){return Object(m.jsx)("option",{value:e._id,children:e.name},t)}))]})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:" Quantity "}),Object(m.jsx)("input",{className:"form-control",value:x,onChange:S("quantity"),type:"number",required:!0})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:" Shipping "}),Object(m.jsxs)("select",{className:"form-control",onChange:S("shipping"),required:!0,children:[Object(m.jsx)("option",{defaultValue:!0,children:"---- Please Select ----"}),Object(m.jsx)("option",{value:"0",children:"No, its online!"}),Object(m.jsx)("option",{value:"1",children:"Yes, there is!"})]})]}),Object(m.jsx)("button",{className:"btn btn-outline-primary",children:"Create Product"})]})]})},R=c(14),U=function(e){var t=e.categories,c=e.handleFilters,r=Object(n.useState)([]),a=Object(d.a)(r,2),s=a[0],o=a[1],i=function(e){return function(){var t=s.indexOf(e),n=Object(R.a)(s);-1===t?n.push(e):n.splice(t,1),o(n),c(n)}};return t.map((function(e,t){return Object(m.jsxs)("li",{className:"list-unstyled",children:[Object(m.jsx)("input",{type:"checkbox",value:s.indexOf(-1===e._id),className:"form-check-input",onChange:i(e)}),Object(m.jsxs)("label",{className:"form-check-label ms-2",children:[e.name," "]})]},t)}))},F=function(e){var t=e.prices,c=e.handleFilters,r=Object(n.useState)(0),a=Object(d.a)(r,2),s=(a[0],a[1]),o=function(e){c(e.target.value),s(e.target.value)};return t.map((function(e,t){return Object(m.jsxs)("div",{className:"list-unstyled ms-4",children:[Object(m.jsx)("input",{type:"radio",value:"".concat(e._id),name:e,className:"form-check-input",onChange:o}),Object(m.jsxs)("label",{className:"form-check-label ms-2",children:[e.name," "]})]},t)}))},$=[{_id:0,name:"Any",array:[]},{_id:1,name:"0$ to 9$",array:[0,9]},{_id:2,name:"10$ to 19$",array:[10,19]},{_id:3,name:"20$ to 29$",array:[20,29]},{_id:4,name:"30$ to 39$",array:[30,39]},{_id:4,name:"More than 40$",array:[40,599999]}],L=function(){var e=Object(n.useState)({filters:{category:[],price:[]}}),t=Object(d.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)([]),s=Object(d.a)(a,2),o=s[0],i=s[1],j=Object(n.useState)(!1),u=Object(d.a)(j,2),b=(u[0],u[1]),h=Object(n.useState)(6),p=Object(d.a)(h,2),f=p[0],x=(p[1],Object(n.useState)(0)),g=Object(d.a)(x,2),N=g[0],v=g[1],S=Object(n.useState)([]),w=Object(d.a)(S,2),C=w[0],T=w[1],A=Object(n.useState)(0),E=Object(d.a)(A,2),I=E[0],_=E[1],D=function(e){y(N,f,e).then((function(e){e.error?b(e.error):(T(e.data),_(e.size),v(0))}))},B=function(e){var t=N+f;y(t,c.filters).then((function(e){e.error?b(e.error):(T([].concat(Object(R.a)(C),Object(R.a)(e.data))),_(e.size),v(t))}))};Object(n.useEffect)((function(){k().then((function(e){e.error?b(e.error):i(e)})),D(N,c.filters)}),[]);var J=function(e,t){var n=Object(l.a)({},c);if(n.filters[t]=e,"price"===t){var a=q(e);n.filters[t]=a}D(c.filters),r(n)},q=function(e){var t=$,c=[];for(var n in t)t[n]._id===parseInt(e)&&(c=t[n].array);return c};return Object(m.jsx)(O,{title:"Shop Page",description:"Search and find books of your choice",className:"container-fluid",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsxs)("div",{className:"col-4",children:[Object(m.jsx)("h4",{children:"Filter by categories"}),Object(m.jsx)("ul",{children:Object(m.jsx)(U,{categories:o,handleFilters:function(e){return J(e,"category")}})}),Object(m.jsx)("h4",{children:"Filter by price range"}),Object(m.jsx)("div",{className:"ms-2",children:Object(m.jsx)(F,{prices:$,handleFilters:function(e){return J(e,"price")}})})]}),Object(m.jsxs)("div",{className:"col-8",children:[Object(m.jsx)("h2",{className:"mb-4",children:"Products"}),Object(m.jsx)("div",{className:"row",children:C.map((function(e,t){return Object(m.jsx)("div",{className:"col-4 mb-3",children:Object(m.jsx)(P,{product:e})},t)}))}),Object(m.jsx)("hr",{}),I>0&&I>=f&&Object(m.jsx)("button",{onClick:B,className:"btn btn-warning mb-5",children:"Load More"})]})]})})},M=function(e){var t=Object(n.useState)({}),c=Object(d.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(!1),o=Object(d.a)(s,2),i=(o[0],o[1]),l=Object(n.useState)([]),u=Object(d.a)(l,2),b=u[0],h=u[1],p=function(e){(function(e){return fetch("".concat(j,"/product/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))})(e).then((function(e){e.error?i(e.error):(a(e),function(e){return fetch("".concat(j,"/products/related/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(e._id).then((function(e){e.error?i(e.error):h(e)})))}))};return Object(n.useEffect)((function(){var t=e.match.params.productId;p(t)}),[e]),Object(m.jsxs)(O,{title:r.name,description:r&&r.description&&r.description.substring(0,100),className:"container",children:[Object(m.jsx)("h2",{className:"mb-4",children:"Single Product"}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-8",children:r&&r.description&&Object(m.jsx)(P,{product:r,showViewbutton:!1})}),Object(m.jsxs)("div",{className:"col-4",children:[Object(m.jsx)("h4",{children:"Related products"}),console.log(b),b.map((function(e,t){return Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)(P,{product:e})},t)}))]})]})]})},V=c(30),Y=c.n(V),H=function(e){var t=e.products,c=e.setRun,r=void 0===c?function(e){return e}:c,a=e.run,o=void 0===a?void 0:a,i=Object(n.useState)({loading:!1,success:!1,clientToken:null,error:"",instance:{},address:""}),u=Object(d.a)(i,2),h=u[0],p=u[1],O=b()&&b().user._id,f=b()&&b().token,x=function(e,t){(function(e,t){return fetch("".concat(j,"/braintree/getToken/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))})(e,t).then((function(e){e.error?p(Object(l.a)(Object(l.a)({},e),{},{error:e.error})):p({clientToken:e.clientToken})}))};Object(n.useEffect)((function(){x(O,f)}),[]);var g,N,v,y=function(e){p(Object(l.a)(Object(l.a)({},h),{},{address:e.target.value}))},S=function(){return t.reduce((function(e,t){return e+t.count*t.price}),0)},w=h.address,C=function(){p({loading:!0});h.instance.requestPaymentMethod().then((function(e){var c={paymentMethodNonce:e.nonce,amount:S()};(function(e,t,c){return fetch("".concat(j,"/braintree/payment/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(c)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))})(O,f,c).then((function(e){var c={products:t,transaction_id:e.transaction.id,amount:e.transaction.amount,address:w};(function(e,t,c){return fetch("".concat(j,"/order/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({order:c})}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))})(O,f,c).then((function(e){var t;t=function(){r(!o),p({loading:!1,success:!0})},"undefined"!==typeof window&&(localStorage.removeItem("cart"),t())})).catch((function(e){console.log(e),p({loading:!1})}))})).catch((function(e){console.log(e),p({loading:!1})}))})).catch((function(e){console.log("dropin error: ",e),p(Object(l.a)(Object(l.a)({},h),{},{error:e.message}))}))},P=function(){return Object(m.jsx)("div",{onBlur:function(){return p(Object(l.a)(Object(l.a)({},h),{},{error:""}))},children:null!==h.clientToken&&t.length>0?Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"gorm-group mb-3",children:[Object(m.jsx)("label",{className:"text-muted",children:"Delivery address:"}),Object(m.jsx)("textarea",{onChange:y,className:"form-control",value:h.address,placeholder:"Type your delivery address here..."})]}),Object(m.jsx)(Y.a,{options:{authorization:h.clientToken,paypal:{flow:"vault"}},onInstance:function(e){return h.instance=e}}),Object(m.jsx)("button",{onClick:C,className:"btn btn-success btn-block",children:"Pay"})]}):null})};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Total: ".concat(S())}),(v=h.loading,v&&Object(m.jsx)("h2",{className:"text-danger",children:"Loading..."})),(N=h.success,N&&Object(m.jsx)("div",{className:"alert alert-success",children:Object(m.jsx)("h3",{children:"Thanks! Your payment was successful!"})})),(g=h.error,Object(m.jsx)("div",{className:"alert alert-danger",style:{display:g?"":"none"},children:g})),b()?Object(m.jsx)("div",{children:P()}):Object(m.jsx)(s.b,{to:"/signin",children:Object(m.jsx)("button",{className:"btn btn-primary",children:"Sign in to checkout"})})]})},Q=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(!1),o=Object(d.a)(a,2),i=o[0],l=o[1];Object(n.useEffect)((function(){console.log("MAX DEPTH ..."),r("undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[])}),[i]);return Object(m.jsx)(O,{title:"Shopping Cart",description:"Checkout now!",className:"container-fluid",children:Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("div",{className:"col-6",children:c.length>0?function(e){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("h2",{children:["Your cart has ","".concat(e.length)," items"]}),Object(m.jsx)("hr",{}),e.map((function(e,t){return Object(m.jsx)(P,{product:e,showCartButton:!1,cartUpdate:!0,showRemoveProductButton:!0,setRun:l,run:i},t)}))]})}(c):Object(m.jsxs)("h2",{children:["Your Cart is empty. ",Object(m.jsx)("br",{}),Object(m.jsx)(s.b,{to:"/shop",children:" Continue shopping. "})]})}),Object(m.jsxs)("div",{className:"col-6",children:[Object(m.jsx)("h2",{className:"mb-4",children:"Your Cart Summary"}),Object(m.jsx)("hr",{}),Object(m.jsx)(H,{products:c})]})]})})},W=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)([]),s=Object(d.a)(a,2),o=s[0],i=s[1],l=b(),u=l.user,h=l.token,p=function(){(function(e,t){return fetch("".concat(j,"/order/list/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(u._id,h).then((function(e){e.error?console.log(e.error):r(e)}))},f=function(){(function(e,t){return fetch("".concat(j,"/order/status-values/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(u._id,h).then((function(e){e.error?console.log(e.error):i(e)}))};Object(n.useEffect)((function(){p(),f()}),[]);var x=function(e,t){return Object(m.jsxs)("div",{className:"input-group mb-2 mr-sm-2",children:[Object(m.jsx)("div",{className:"input-group-prepend",children:Object(m.jsx)("div",{className:"input-group-text",children:e})}),Object(m.jsx)("input",{type:"text",value:t,className:"form-control",readOnly:!0})]})},g=function(e,t){(function(e,t,c,n){return fetch("".concat(j,"/order/").concat(c,"/status/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({status:n,orderId:c})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(u._id,h,t,e.target.value).then((function(e){e.error?console.log("Status update failed"):p()}))},N=function(e){return Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsxs)("h3",{className:"mark mb-4",children:["Status: ",e.status]}),Object(m.jsxs)("select",{className:"form-control",onChange:function(t){return g(t,e._id)},children:[Object(m.jsx)("option",{children:"Update Status"}),o.map((function(e,t){return Object(m.jsx)("option",{value:e,children:e},t)}))]})]})};return Object(m.jsx)(O,{title:"Orders",description:"G'day ".concat(u.name,", you can manage all the orders here"),className:"container-fluid",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsxs)("div",{className:"col-md-8 offset-md-2",children:[c.length>0?Object(m.jsxs)("h1",{className:"text-danger display-2",children:["Total orders: ",c.length]}):Object(m.jsx)("h1",{className:"text-danger",children:"No orders"}),console.log(c),c.map((function(e,t){return Object(m.jsxs)("div",{className:"mt-5",style:{borderBottom:"5px solid indigo"},children:[Object(m.jsx)("h2",{className:"mb-5",children:Object(m.jsxs)("span",{className:"bg-primary",children:["Order ID: ",e._id]})}),Object(m.jsxs)("ul",{className:"list-group mb-2",children:[Object(m.jsx)("li",{className:"list-group-item",children:N(e)}),Object(m.jsxs)("li",{className:"list-group-item",children:["Transaction ID: ",e.transaction_id]}),Object(m.jsxs)("li",{className:"list-group-item",children:["Amount: ","".concat(e.amount)]}),Object(m.jsxs)("li",{className:"list-group-item",children:["Ordered by: ",e.user.name]}),Object(m.jsxs)("li",{className:"list-group-item",children:["Ordered on: ",C()(e.createdAt).fromNow()]}),Object(m.jsxs)("li",{className:"list-group-item",children:["Delivery address: ",e.address]})]}),Object(m.jsxs)("h3",{className:"mt-4 mb-4 font-italic",children:["Total products in the order: ",e.products.length]}),e.products.map((function(e,t){return Object(m.jsxs)("div",{className:"mb-4",style:{padding:"20px",border:"1px solid indigo"},children:[x("Product name",e.name),x("Product price",e.price),x("Product total",e.count),x("Product Id",e._id)]},t)}))]},t)}))]})})})},X=function(e){var t=e.match;console.log(t);var c=Object(n.useState)({name:"",email:"",password:"",error:!1,success:!1}),r=Object(d.a)(c,2),a=r[0],s=r[1],u=b().token,h=a.name,p=a.email,f=a.password,x=(a.error,a.success),g=function(e){(function(e,t){return fetch("".concat(j,"/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,u).then((function(e){e.error?s(Object(l.a)(Object(l.a)({},a),{},{error:!0})):s(Object(l.a)(Object(l.a)({},a),{},{name:e.name,email:e.email}))}))};Object(n.useEffect)((function(){g(t.params.userId)}),[]);var N=function(e){return function(t){s(Object(l.a)(Object(l.a)({},a),{},Object(i.a)({error:!1},e,t.target.value)))}},v=function(e){e.preventDefault(),function(e,t,c){return fetch("".concat(j,"/user/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(c)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t.params.userId,u,{name:h,email:p,password:f}).then((function(e){e.error?console.log(e.error):function(e,t){if("undefined"!==typeof window&&localStorage.getItem("jwt")){var c=JSON.parse(localStorage.getItem("jwt"));c.user=e,console.log(c),localStorage.setItem("jwt",JSON.stringify(c)),t()}}(e,(function(){s(Object(l.a)(Object(l.a)({},a),{},{name:e.name,email:e.email,success:!0}))}))}))};return Object(m.jsxs)(O,{title:"Profile",description:"Update your profile",className:"container-fluid",children:[Object(m.jsx)("h2",{className:"mb-4",children:"Profile update"}),function(e,t,c){return Object(m.jsxs)("form",{children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Name"}),Object(m.jsx)("input",{type:"text",onChange:N("name"),className:"form-control",value:e})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Email"}),Object(m.jsx)("input",{type:"email",onChange:N("email"),className:"form-control",value:t})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Password"}),Object(m.jsx)("input",{type:"password",onChange:N("password"),className:"form-control",value:c})]}),Object(m.jsx)("button",{onClick:v,className:"btn btn-primary",children:"Submit"})]})}(h,p,f),function(e){if(e)return Object(m.jsx)(o.a,{to:"/cart"})}(x),JSON.stringify(a)]})},K=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],r=t[1],a=b(),o=a.user,i=a.token,l=function(){fetch("".concat(j,"/products?limit=undefined"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?console.log(e.error):r(e)}))},u=function(e){(function(e,t,c){return fetch("".concat(j,"/product/").concat(e,"/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(c)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,o._id,i).then((function(e){e.error?console.log(e.error):l()}))};return Object(n.useEffect)((function(){l()}),[]),Object(m.jsx)(O,{title:"Manage Products",description:"Perform CRUD on products",className:"container-fluid",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsxs)("div",{className:"col-12",children:[Object(m.jsxs)("h2",{className:"text-center",children:["Total ",c.length," products"]}),Object(m.jsx)("hr",{}),Object(m.jsx)("ul",{className:"list-group",children:c.map((function(e,t){return Object(m.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(m.jsx)("strong",{children:e.name}),Object(m.jsx)(s.b,{className:"btn position-relative",to:"/admin/product/update/".concat(e._id),children:Object(m.jsx)("span",{className:"position-absolute top-50 start-50 translate-middle badge rounded-pill bg-warning",children:"Update"})}),Object(m.jsx)(s.b,{className:"btn position-relative",children:Object(m.jsx)("span",{onClick:function(){return u(e._id)},className:"position-absolute top-50 start-50 translate-middle badge rounded-pill bg-danger",children:"Delete"})})]},t)}))}),Object(m.jsx)("br",{})]})})})},Z=function(e){var t=e.match,c=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:!1,createdProduct:"",redirectToProfile:!1,formData:""}),r=Object(d.a)(c,2),a=r[0],s=r[1],o=b(),u=o.user,h=o.token,p=a.name,f=a.description,x=a.price,g=a.categories,N=a.category,v=a.shipping,y=a.quantity,S=a.loading,w=a.error,C=a.createdProduct,P=(a.redirectToProfile,a.formData),T=function(e){(function(e){return fetch("".concat(j,"/product/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e).then((function(e){e.error?s(Object(l.a)(Object(l.a)({},a),{},{error:e.error})):(s(Object(l.a)(Object(l.a)({},a),{},{name:e.name,description:e.description,price:e.price,category:e.category._id,shipping:e.shipping,quantity:e.quantity,formData:new FormData})),A())}))},A=function(){k().then((function(e){e.error?s(Object(l.a)(Object(l.a)({},a),{},{error:e.error})):s({categories:e,formData:new FormData})}))};Object(n.useEffect)((function(){T(t.params.productId)}),[]);var E=function(e){return function(t){var c="photo"===e?t.target.files[0]:t.target.value;P.set(e,c),s(Object(l.a)(Object(l.a)({},a),{},Object(i.a)({},e,c)))}},I=function(e){e.preventDefault(),s(Object(l.a)(Object(l.a)({},a),{},{error:"",loading:!0})),function(e,t,c,n){return fetch("".concat(j,"/product/").concat(e,"/").concat(t),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(c)},body:n}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t.params.productId,u._id,h,P).then((function(e){e.error?s(Object(l.a)(Object(l.a)({},a),{},{error:e.error})):s(Object(l.a)(Object(l.a)({},a),{},{name:"",description:"",photo:"",price:"",quantity:"",loading:!1,error:!1,redirectToProfile:!0,createdProduct:e.name}))}))};return Object(m.jsx)(O,{title:"Add a new product",description:"G'day ".concat(u.name,", ready to add a new product?"),children:Object(m.jsx)("div",{className:"row",children:Object(m.jsxs)("div",{className:"col-md-8 offset-md-2",children:[S&&Object(m.jsx)("div",{className:"alert alert-success",children:Object(m.jsx)("h2",{children:"Loading..."})}),Object(m.jsx)("div",{className:"alert alert-info",style:{display:C?"":"none"},children:Object(m.jsxs)("h2",{children:["".concat(C)," is updated!"]})}),Object(m.jsx)("div",{className:"alert alert-danger",style:{display:w?"":"none"},children:w}),Object(m.jsxs)("form",{className:"mb-3",onSubmit:I,children:[Object(m.jsx)("h4",{children:"Post Photo"}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("label",{className:"btn btn-secondary",children:Object(m.jsx)("input",{onChange:E("photo"),type:"file",name:"photo",accept:"image/*"})})}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Name"}),Object(m.jsx)("input",{onChange:E("name"),type:"text",className:"form-control",value:p})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Description"}),Object(m.jsx)("textarea",{onChange:E("description"),className:"form-control",value:f})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Price"}),Object(m.jsx)("input",{onChange:E("price"),type:"number",className:"form-control",value:x})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Category"}),Object(m.jsxs)("select",{onChange:E("category"),className:"form-control",children:[Object(m.jsx)("option",{children:"Please select"}),g&&g.map((function(e,t){return Object(m.jsx)("option",{value:e._id,children:e.name},t)}))]})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Shipping"}),Object(m.jsxs)("select",{onChange:E("shipping"),className:"form-control",children:[Object(m.jsx)("option",{children:"Please select"}),Object(m.jsx)("option",{value:"0",children:"No, it's online!"}),Object(m.jsx)("option",{value:"1",children:"Yes, there is!"})]})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{className:"text-muted",children:"Quantity"}),Object(m.jsx)("input",{onChange:E("quantity"),type:"number",className:"form-control",value:y})]}),Object(m.jsx)("div",{className:"d-grid gap-1 rouded-pills",children:Object(m.jsx)("button",{className:"btn btn-outline-primary mt-2 rounded-pill",children:"Update Product"})})]}),console.log(p,f,x,N,v,y)]})})})},ee=function(){return Object(m.jsx)(s.a,{children:Object(m.jsxs)(o.d,{children:[Object(m.jsx)(o.b,{path:"/",exact:!0,component:A}),Object(m.jsx)(o.b,{path:"/shop",exact:!0,component:L}),Object(m.jsx)(o.b,{path:"/cart",exact:!0,component:Q}),Object(m.jsx)(o.b,{path:"/product/:productId",exact:!0,component:M}),Object(m.jsx)(o.b,{path:"/signin",exact:!0,component:x}),Object(m.jsx)(o.b,{path:"/signup",exact:!0,component:f}),Object(m.jsx)(_,{path:"/user/dashboard",exact:!0,component:D}),Object(m.jsx)(J,{path:"/admin/dashboard",exact:!0,component:q}),Object(m.jsx)(J,{path:"/create/category",exact:!0,component:G}),Object(m.jsx)(J,{path:"/create/product",exact:!0,component:z}),Object(m.jsx)(J,{path:"/admin/orders",exact:!0,component:W}),Object(m.jsx)(_,{path:"/profile/:userId",exact:!0,component:X}),Object(m.jsx)(J,{path:"/admin/products",exact:!0,component:K}),Object(m.jsx)(J,{path:"/admin/product/update/:productId",exact:!0,component:Z})]})})};a.a.render(Object(m.jsx)(ee,{}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.911c526b.chunk.js.map