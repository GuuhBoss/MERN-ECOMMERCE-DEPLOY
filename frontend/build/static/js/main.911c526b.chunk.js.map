{"version":3,"sources":["config.js","auth/index.js","core/Menu.js","core/cartHelpers.js","core/Layout.js","user/Signup.js","user/Signin.js","core/apiCore.js","core/ShowImg.js","core/Card.js","admin/apiAdmin.js","core/Search.js","core/Home.js","auth/PrivateRoute.js","user/UserDashboard.js","user/apiUser.js","auth/AdminRoute.js","user/AdminDashboard.js","admin/AddCategory.js","admin/AddProduct.js","core/Checkbox.js","core/Radiobox.js","core/fixedPrices.js","core/Shop.js","core/Product.js","core/Checkout.js","core/Cart.js","admin/Orders.js","user/Profile.js","admin/ManageProducts.js","admin/UpdateProduct.js","Routes.js","index.js"],"names":["API","process","signout","next","window","localStorage","removeItem","fetch","method","headers","Accept","then","res","json","catch","err","console","log","isAuthenticated","getItem","JSON","parse","isActive","history","path","location","pathname","color","withRouter","className","style","to","length","user","role","cursor","onClick","Layout","title","description","children","Signup","useState","name","email","password","error","success","values","setValues","handleChange","event","target","value","clickSubmit","preventDefault","body","stringify","data","firstError","display","onChange","type","Signin","loading","redirectToReferrer","signin","setItem","authenticate","redirectUser","getProducts","sortBy","getFilteredProducts","skip","limit","filters","ShowImg","item","url","src","_id","alt","maxHeight","maxWidth","Card","product","showViewbutton","showCartButton","cartUpdate","showRemoveProductButton","setRun","f","run","undefined","redirect","setRedirect","count","setCount","addToCart","cart","push","Array","from","Set","map","p","id","find","addItem","productId","i","updateItem","shouldRedirect","price","category","moment","createdAt","fromNow","quantity","showStock","splice","showRemoveButton","showCartUpdateOptions","getCategories","Search","categories","search","results","searched","setData","searchData","params","query","queryString","list","searchSubmit","e","searchMessage","useEffect","onSubmit","defaultValue","c","placeholder","border","searchedProducts","Home","productsBySell","setProductsBySell","productsByArrival","setProductsByArrival","setError","PrivateRoute","Component","component","rest","render","props","state","Dashboard","setHistory","token","init","userId","Authorization","getPurchaseHistory","h","products","purchaseHistory","AdminRoute","AdminDashboard","AddCategory","setName","setSuccess","createCategory","autoFocus","required","AddProduct","shipping","photo","createdProduct","redirectToProfile","formData","FormData","files","set","createProduct","accept","Checkbox","handleFilters","checked","setChecked","handleToggle","currentCategoryId","indexOf","newCheckedCategoryId","Radiobox","prices","setValue","array","Shop","myFilters","setMyFilters","setCategories","setSkip","filteredResults","setFilteredResults","size","setSize","loadFilteredResults","newFilters","loadMore","toSkip","filterBy","priceValues","handlePrice","key","parseInt","Product","setProduct","relatedProduct","setRelatedProduct","loadSingleProduct","read","listRelated","match","substring","Checkout","clientToken","instance","address","getToken","getBraintreeClientToken","handleAddress","getTotal","reduce","currentValue","nextValue","deliveryAddress","buy","requestPaymentMethod","paymentData","paymentMethodNonce","nonce","amount","processPayment","response","createOrderData","transaction_id","transaction","order","createOrder","message","showDropIn","onBlur","options","authorization","paypal","flow","onInstance","Cart","items","setItems","showItems","Orders","orders","setOrders","statusValues","setStatusValues","loadOrders","listOrders","loadStatusValues","getStatusValues","showInput","readOnly","handleStatusChange","orderId","status","updateOrderStatus","showStatus","o","index","oIndex","borderBottom","pIndex","padding","Profile","update","auth","updateUser","profileUpdate","ManageProducts","setProducts","loadProducts","destroy","deleteProduct","UpdateProduct","getProduct","initCategories","updateProduct","Routes","exact","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.911c526b.chunk.js","sourcesContent":["export const API = process.env.REACT_APP_API_URL;\r\n","import { API } from \"../config\";\r\n\r\nexport const signup = (user) => {\r\n  // console.log(name, email, password);\r\n  // console.log(user);\r\n  // console.log(JSON.stringify(user))\r\n  return fetch(`${API}/signup`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(user),\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const signin = (user) => {\r\n  // console.log(name, email, password);\r\n  // console.log(user);\r\n  // console.log(JSON.stringify(user))\r\n  return fetch(`${API}/signin`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(user),\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const authenticate = (data, next) => {\r\n  if (typeof window !== \"undefined\") {\r\n    localStorage.setItem(\"jwt\", JSON.stringify(data));\r\n    next();\r\n  }\r\n};\r\n\r\nexport const signout = (next) => {\r\n  if (typeof window !== \"undefined\") {\r\n    localStorage.removeItem(\"jwt\");\r\n    next();\r\n\r\n    return fetch(`${API}/signout`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n};\r\n\r\n\r\nexport const isAuthenticated = () => {\r\n  if(typeof window == 'undefined') {\r\n    return false\r\n  }\r\n\r\n  if (localStorage.getItem('jwt')) {\r\n    return JSON.parse(localStorage.getItem('jwt'))\r\n  } else {\r\n    return false\r\n  }\r\n}","import React from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { signout, isAuthenticated } from \"../auth\";\r\nimport { itemTotal } from \"./cartHelpers\";\r\n\r\nconst isActive = (history, path) => {\r\n  if (history.location.pathname === path) {\r\n    return { color: \"#ff9900\" };\r\n  } else {\r\n    return { color: \"#ffffff\" };\r\n  }\r\n};\r\n\r\nconst Menu = ({ history }) => (\r\n  <div>\r\n    <ul className=\"nav nav-tabs bg-primary\">\r\n      <li className=\"nav-item\">\r\n        <Link className=\"nav-link\" style={isActive(history, \"/\")} to=\"/\">\r\n          Home\r\n        </Link>\r\n      </li>\r\n      <li className=\"nav-item\">\r\n        <Link\r\n          className=\"nav-link\"\r\n          style={isActive(history, \"/shop\")}\r\n          to=\"/shop\"\r\n        >\r\n          Shop\r\n        </Link>\r\n      </li>\r\n      <li className=\"nav-item\">\r\n        <Link\r\n          className=\"nav-link\"\r\n          style={isActive(history, \"/cart\")}\r\n          to=\"/cart\"\r\n        >\r\n          Cart\r\n          <sup>\r\n            <small className=\"cart-badge\"> {itemTotal()} </small>\r\n          </sup>\r\n        </Link>\r\n      </li>\r\n\r\n      {isAuthenticated() && isAuthenticated().user.role === 0 && (\r\n        <li className=\"nav-item\">\r\n          <Link\r\n            className=\"nav-link\"\r\n            style={isActive(history, \"/user/dashboard\")}\r\n            to=\"/user/dashboard\"\r\n          >\r\n            Dashboard\r\n          </Link>\r\n        </li>\r\n      )}\r\n\r\n      {isAuthenticated() && isAuthenticated().user.role === 1 && (\r\n        <li className=\"nav-item\">\r\n          <Link\r\n            className=\"nav-link\"\r\n            style={isActive(history, \"/admin/dashboard\")}\r\n            to=\"/admin/dashboard\"\r\n          >\r\n            Dashboard\r\n          </Link>\r\n        </li>\r\n      )}\r\n\r\n      {!isAuthenticated() && (\r\n        <>\r\n          <li className=\"nav-item\">\r\n            <Link\r\n              className=\"nav-link\"\r\n              style={isActive(history, \"/signin\")}\r\n              to=\"/signin\"\r\n            >\r\n              Signin\r\n            </Link>\r\n          </li>\r\n\r\n          <li className=\"nav-item\">\r\n            <Link\r\n              className=\"nav-link\"\r\n              style={isActive(history, \"/signup\")}\r\n              to=\"/signup\"\r\n            >\r\n              Signup\r\n            </Link>\r\n          </li>\r\n        </>\r\n      )}\r\n\r\n      {isAuthenticated() && (\r\n        <li className=\"nav-item\">\r\n          <Link\r\n            className=\"nav-link\"\r\n            style={{ cursor: \"pointer\", color: \"#ffffff\" }}\r\n            onClick={signout}\r\n            to=\"/\"\r\n          >\r\n            Signout\r\n          </Link>\r\n        </li>\r\n      )}\r\n    </ul>\r\n  </div>\r\n);\r\n\r\nexport default withRouter(Menu);\r\n","export const addItem = (item, next) => {\r\n  let cart = [];\r\n  if (typeof window !== \"undefined\") {\r\n    if (localStorage.getItem(\"cart\")) {\r\n      cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n    }\r\n  }\r\n  cart.push({\r\n    ...item,\r\n    count: 1,\r\n  });\r\n\r\n  cart = Array.from(new Set(cart.map((p) => p._id))).map((id) => {\r\n    return cart.find((p) => p._id === id);\r\n  });\r\n\r\n  localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n\r\n  next();\r\n};\r\n\r\nexport const itemTotal = () => {\r\n  if (typeof window !== \"undefined\") {\r\n    if (localStorage.getItem(\"cart\")) {\r\n      return JSON.parse(localStorage.getItem(\"cart\")).length;\r\n    }\r\n  }\r\n  return 0;\r\n};\r\n\r\nexport const getCart = () => {\r\n  if (typeof window !== \"undefined\") {\r\n    if (localStorage.getItem(\"cart\")) {\r\n      return JSON.parse(localStorage.getItem(\"cart\"));\r\n    }\r\n  }\r\n  return [];\r\n};\r\n\r\nexport const updateItem = (productId, count) => {\r\n  let cart = [];\r\n  if (typeof window !== \"undefined\") {\r\n    if (localStorage.getItem(\"cart\")) {\r\n      cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n    }\r\n\r\n    cart.map((product, i) => {\r\n      if (product._id === productId) {\r\n        cart[i].count = count;\r\n      }\r\n    });\r\n\r\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n  }\r\n};\r\n\r\nexport const removeItem = (productId, count) => {\r\n  let cart = [];\r\n  if (typeof window !== \"undefined\") {\r\n    if (localStorage.getItem(\"cart\")) {\r\n      cart = JSON.parse(localStorage.getItem(\"cart\"));\r\n    }\r\n\r\n    cart.map((product, i) => {\r\n      if (product._id === productId) {\r\n        cart.splice(i, 1);\r\n      }\r\n    });\r\n\r\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n  }\r\n\r\n  return cart;\r\n};\r\n\r\nexport const emptyCart = (next) => {\r\n  if(typeof window !== 'undefined') {\r\n    localStorage.removeItem('cart')\r\n    next()\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport Menu from \"./Menu\";\r\nimport \"../style.css\";\r\n\r\nconst Layout = ({\r\n  title = \"Title\",\r\n  description = \"Description\",\r\n  className,\r\n  children,\r\n}) => (\r\n  <div>\r\n    <Menu />\r\n    <div className=\"p-5 mb-4 bg-light jumbotron\">\r\n      <div className=\"container-fluid  text-center py-5\">\r\n        <h2 className=\"display-5 fw-bold \">{title}</h2>\r\n        <p className=\"fs-4\">{description}</p>\r\n      </div>\r\n    </div>\r\n    <div className={`${className} `}> {children} </div>\r\n  </div>\r\n);\r\n\r\nexport default Layout;\r\n","import React, { useState } from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { signup } from \"../auth\";\r\n\r\nconst Signup = () => {\r\n  const [values, setValues] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    error: \"\",\r\n    success: false,\r\n  });\r\n\r\n  const { name, email, password, success, error} = values;\r\n\r\n  const handleChange = (name) => (event) => {\r\n    setValues({ ...values, error: false, [name]: event.target.value });\r\n  };\r\n\r\n  const clickSubmit = (event) => {\r\n    event.preventDefault();\r\n    signup({ name, email, password })\r\n    .then((data) => {\r\n      if (data.firstError || data.error) {\r\n        setValues({ ...values, error: data.firstError || data.error, success: false });\r\n      } else {\r\n        setValues({\r\n          ...values,\r\n          name: \"\",\r\n          email: \"\",\r\n          password: \"\",\r\n          error: \"\",\r\n          success: true,\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  const signUpForm = () => (\r\n    <form>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Name</label>\r\n        <input\r\n          onChange={handleChange(\"name\")}\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          value={name}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Email</label>\r\n        <input\r\n          onChange={handleChange(\"email\")}\r\n          type=\"email\"\r\n          className=\"form-control\"\r\n          value={email}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Password</label>\r\n        <input\r\n          onChange={handleChange(\"password\")}\r\n          type=\"password\"\r\n          className=\"form-control\"\r\n          value={password}\r\n        />\r\n      </div>\r\n      <button onClick={clickSubmit} className=\"btn btn-primary mt-2\">\r\n        Submit\r\n      </button>\r\n    </form>\r\n  );\r\n\r\n  const showError = () => (\r\n    <div\r\n      className=\"alert alert-danger\"\r\n      style={{ display: error ? \"\" : \"none\" }}\r\n    >\r\n      {error}\r\n    </div>\r\n  );\r\n\r\n  const showSuccess = () => (\r\n    <div\r\n      className=\"alert alert-info\"\r\n      style={{ display: success ? \"\" : \"none\" }}\r\n    >\r\n      New account is created. Please <Link to='/signin'>Signin</Link>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Signup\"\r\n      description=\"Signup to Node React E-commerce App\"\r\n      className=\"container col-md-8 offset-md-2\"\r\n    >\r\n      {showSuccess()}\r\n      {showError()}\r\n      {signUpForm()}\r\n      {/* {JSON.stringify(values)} */}\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Signup;\r\n","import React, { useState } from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { authenticate, signin, isAuthenticated } from \"../auth\";\r\n\r\nconst Signin = () => {\r\n  const [values, setValues] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n    error: \"\",\r\n    loading: false,\r\n    redirectToReferrer: false,\r\n  });\r\n\r\n  const { email, password, loading, error, redirectToReferrer } = values;\r\n  const { user } = isAuthenticated();\r\n\r\n  const handleChange = (name) => (event) => {\r\n    setValues({ ...values, error: false, [name]: event.target.value });\r\n  };\r\n\r\n  const clickSubmit = (event) => {\r\n    event.preventDefault();\r\n    setValues({ ...values, error: false, loading: true });\r\n    signin({ email, password }).then((data) => {\r\n      if (data.firstError || data.error) {\r\n        setValues({\r\n          ...values,\r\n          error: data.firstError || data.error,\r\n          loading: false,\r\n        });\r\n      } else {\r\n        authenticate(data, () =>\r\n          setValues({\r\n            ...values,\r\n            redirectToReferrer: true,\r\n          })\r\n        );\r\n      }\r\n    });\r\n  };\r\n\r\n  const signInForm = () => (\r\n    <form>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Email</label>\r\n        <input\r\n          onChange={handleChange(\"email\")}\r\n          type=\"email\"\r\n          className=\"form-control\"\r\n          value={email}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Password</label>\r\n        <input\r\n          onChange={handleChange(\"password\")}\r\n          type=\"password\"\r\n          className=\"form-control\"\r\n          value={password}\r\n        />\r\n      </div>\r\n      <button onClick={clickSubmit} className=\"btn btn-primary mt-2\">\r\n        Submit\r\n      </button>\r\n    </form>\r\n  );\r\n\r\n  const showError = () => (\r\n    <div\r\n      className=\"alert alert-danger\"\r\n      style={{ display: error ? \"\" : \"none\" }}\r\n    >\r\n      {error}\r\n    </div>\r\n  );\r\n\r\n  const showLoading = () =>\r\n    loading && (\r\n      <div className=\"alert alert-info\">\r\n        <h2>Loading...</h2>\r\n      </div>\r\n    );\r\n\r\n  const redirectUser = () => {\r\n    //console.log(redirectToReferrer);\r\n    if (redirectToReferrer) {\r\n      if (user && user.role === 1) {\r\n        return <Redirect to=\"/admin/dashboard\" />;\r\n      } else {\r\n        return <Redirect to=\"/user/dashboard\" />;\r\n      }\r\n    }\r\n    // console.log(isAuthenticated());\r\n    if (isAuthenticated()) {\r\n      <Redirect to=\"/\" />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Signin\"\r\n      description=\"Signin to Node React E-commerce App\"\r\n      className=\"container col-md-8 offset-md-2\"\r\n    >\r\n      {showLoading()}\r\n      {showError()}\r\n      {signInForm()}\r\n      {redirectUser()}\r\n      {/* {JSON.stringify(values)} */}\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Signin;\r\n","import { API } from \"../config\";\r\nimport queryString from \"query-string\";\r\n\r\nexport const getProducts = (sortBy) => {\r\n  return fetch(`${API}/products?sortBy=${sortBy}&order=desc&limit=6`, {\r\n    method: \"GET\",\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const getFilteredProducts = (skip, limit, filters = {}) => {\r\n  const data = {\r\n    limit,\r\n    skip,\r\n    filters,\r\n  };\r\n\r\n  return fetch(`${API}/products/by/search/`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(data),\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const list = (params) => {\r\n  const query = queryString.stringify(params);\r\n  // console.log(\"query:\", query);\r\n\r\n  return fetch(`${API}/products/search?${query}`, {\r\n    method: \"GET\",\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const read = (productId) => {\r\n  return fetch(`${API}/product/${productId}`, {\r\n    method: \"GET\",\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const listRelated = (productId) => {\r\n  return fetch(`${API}/products/related/${productId}`, {\r\n    method: \"GET\",\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const getBraintreeClientToken = (userId, token) => {\r\n  return fetch(`${API}/braintree/getToken/${userId}`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const processPayment = (userId, token, paymentData) => {\r\n  // console.log(paymentData);\r\n  return fetch(`${API}/braintree/payment/${userId}`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: JSON.stringify(paymentData),\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const createOrder = (userId, token, createOrderData) => {\r\n  return fetch(`${API}/order/create/${userId}`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: JSON.stringify({ order: createOrderData }),\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n","import React from \"react\";\r\nimport { API } from \"../config\";\r\n\r\nconst ShowImg = ({ item, url }) => (\r\n  <div className=\"product-img\">\r\n    <img\r\n      src={`${API}/${url}/photo/${item._id}`}\r\n      alt={item.name}\r\n      className=\"mb-3\"\r\n      style={{maxHeight: '100%', maxWidth: '100%'}}\r\n    />\r\n  </div>\r\n);\r\n\r\nexport default ShowImg","import React, { useState } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport ShowImg from \"./ShowImg\";\r\nimport moment from \"moment\";\r\nimport { addItem, updateItem, removeItem } from \"./cartHelpers\";\r\n\r\nconst Card = ({\r\n  product,\r\n  showViewbutton = true,\r\n  showCartButton = true,\r\n  cartUpdate = false,\r\n  showRemoveProductButton = false,\r\n  setRun = (f) => f,\r\n  run = undefined,\r\n  // changeCartSize\r\n}) => {\r\n  const showbutton = () => {\r\n    return (\r\n      showViewbutton && (\r\n        <Link to={`/product/${product._id}`}>\r\n          <button className=\"btn btn-outline-primary mt-2 mb-2\">\r\n            View Product\r\n          </button>\r\n        </Link>\r\n      )\r\n    );\r\n  };\r\n\r\n  const [redirect, setRedirect] = useState(false);\r\n\r\n  const [count, setCount] = useState(product.count);\r\n\r\n  const addToCart = () => {\r\n    addItem(product, () => {\r\n      setRedirect(true);\r\n    });\r\n  };\r\n\r\n  const shouldRedirect = (redirect) => {\r\n    if (redirect) {\r\n      return <Redirect to=\"/cart\" />;\r\n    }\r\n  };\r\n\r\n  const showAddCart = (showCartButton) => {\r\n    return showCartButton && (\r\n      <button  className=\"btn btn-outline-warning mt-2 mb-2\">\r\n        Add to cart\r\n      </button>\r\n    );\r\n  };\r\n\r\n  const showStock = (quantity, showCartButton) => {\r\n    if (quantity > 0) {\r\n      return (\r\n        showCartButton && (\r\n          <button\r\n            onClick={addToCart}\r\n            className=\"btn btn-outline-warning mt-2 mb-2 position-relative\"\r\n          >\r\n            Add to cart\r\n            <span className=\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success\">\r\n              In Stock\r\n            </span>\r\n          </button>\r\n        )\r\n      );\r\n    } else {\r\n      return (\r\n        showCartButton && (\r\n          <button className=\"btn btn-outline-warning position-relative mt-2 mb-2\">\r\n            Add to cart\r\n            <span className=\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger\">\r\n              Out of Stock\r\n            </span>\r\n          </button>\r\n        )\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleChange = (productId) => (event) => {\r\n    setRun(!run); // run useEffect in parent Cart\r\n    setCount(event.target.value < 1 ? 1 : event.target.value);\r\n    if (event.target.value >= 1) {\r\n      updateItem(productId, event.target.value);\r\n    }\r\n  };\r\n\r\n  const showCartUpdateOptions = (cartUpdate) => {\r\n    return (\r\n      cartUpdate && (\r\n        <div>\r\n          <div className=\"input-group mb-3\">\r\n            <div className=\"input-group-prepend\">\r\n              <span className=\"input-group-text\">Adjust Quantity</span>\r\n            </div>\r\n            <input\r\n              type=\"number\"\r\n              className=\"form-control\"\r\n              value={count}\r\n              onChange={handleChange(product._id)}\r\n            />\r\n          </div>\r\n        </div>\r\n      )\r\n    );\r\n  };\r\n  const showRemoveButton = (showRemoveProductButton) => {\r\n    return (\r\n      showRemoveProductButton && (\r\n        <button\r\n          onClick={() => {\r\n            removeItem(product._id);\r\n            setRun(!run); // run useEffect in parent Cart\r\n          }}\r\n          className=\"btn btn-outline-danger mt-2 mb-2\"\r\n        >\r\n          Remove Product\r\n        </button>\r\n      )\r\n    );\r\n  };\r\n  return (\r\n    <div className=\"card\">\r\n      <div className=\"card-header name\">{product.name}</div>\r\n      <div className=\"card-body\">\r\n        {shouldRedirect(redirect)}\r\n        <ShowImg item={product} url=\"products\" />\r\n        <p className=\"text-center\"> Description: {product.description} </p>\r\n        {/* .substring(0, 50)} to control the length of the description */}\r\n        <p className=\"text-center black-10\">Price: {product.price} € </p>\r\n        <p className=\"black-9\">\r\n          Category: {product.category && product.category.name}\r\n        </p>\r\n        <p className=\"black-8\">\r\n          Added on {moment(product.createdAt).fromNow()}\r\n        </p>\r\n        <div className=\"d-lg-flex justify-content-evenly text-center\">\r\n          {showbutton()}\r\n          {/* {showAddCart(showCartButton)} */}\r\n          \r\n          {showStock(product.quantity, showCartButton)}\r\n          {showRemoveButton(showRemoveProductButton)}\r\n          {showCartUpdateOptions(cartUpdate)}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n","import { API } from \"../config\";\r\n\r\nexport const createCategory = (userId, token, category) => {\r\n  return fetch(`${API}/category/create/${userId}`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: JSON.stringify(category),\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const createProduct = (userId, token, product) => {\r\n  return fetch(`${API}/product/create/${userId}`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: product,\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const getCategories = () => {\r\n  return fetch(`${API}/categories`, {\r\n    method: \"GET\",\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const listOrders = (userId, token) => {\r\n  return fetch(`${API}/order/list/${userId}`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const getStatusValues = (userId, token) => {\r\n  return fetch(`${API}/order/status-values/${userId}`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const updateOrderStatus = (userId, token, orderId, status) => {\r\n  return fetch(`${API}/order/${orderId}/status/${userId}`, {\r\n    method: \"PUT\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: JSON.stringify({ status, orderId }),\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\n/**\r\n * to perform crud on product\r\n * get all products\r\n * get a single product\r\n * update single product\r\n * delete single product\r\n */\r\n\r\nexport const getProducts = () => {\r\n  return fetch(`${API}/products?limit=undefined`, {\r\n    method: \"GET\",\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const deleteProduct = (productId, userId, token) => {\r\n  return fetch(`${API}/product/${productId}/${userId}`, {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const getProduct = (productId) => {\r\n  return fetch(`${API}/product/${productId}`, {\r\n    method: \"GET\",\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const updateProduct = (productId, userId, token, product) => {\r\n  return fetch(`${API}/product/${productId}/${userId}`, {\r\n    method: \"PUT\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n    body: product,\r\n  })\r\n    .then((res) => {\r\n      return res.json();\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { getCategories } from \"../admin/apiAdmin\";\r\nimport { list } from \"./apiCore\";\r\nimport Card from \"./Card\";\r\n\r\nconst Search = () => {\r\n  const [data, setData] = useState({\r\n    categories: [],\r\n    category: \"\",\r\n    search: \"\",\r\n    results: [],\r\n    searched: false,\r\n  });\r\n\r\n  const { categories, category, search, results, searched } = data;\r\n\r\n  const loadCategories = () => {\r\n    getCategories().then((data) => {\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n        setData({ ...data, categories: data });\r\n      }\r\n    });\r\n  };\r\n\r\n  const searchData = () => {\r\n    console.log(search, category);\r\n    if (search) {\r\n      list({ search: search || undefined, category: category }).then((res) => {\r\n        if (res.error) {\r\n          console.log(res.error);\r\n        } else {\r\n          setData({ ...data, results: res, searched: true });\r\n        }\r\n      });\r\n    }\r\n  };\r\n  const searchSubmit = (e) => {\r\n    e.preventDefault();\r\n    searchData();\r\n  };\r\n\r\n  const handleChange = (name) => (e) => {\r\n    setData({ ...data, [name]: e.target.value, searched: false });\r\n  };\r\n\r\n  const searchMessage = (searched, results) => {\r\n    if (searched && results.length > 0) {\r\n      return `Found ${results.length} products`;\r\n    }\r\n\r\n    if (searched && results.length < 1) {\r\n      return `No Products Found`;\r\n    }\r\n  };\r\n\r\n  const searchedProducts = (results = []) => {\r\n    return (\r\n      <div>\r\n        <h2 className=\"mt-4 mb-4\">{searchMessage(searched, results)}</h2>\r\n        <div className=\"row\">\r\n          {results.map((product, i) => (\r\n            <Card key={i} product={product} />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const searchForm = () => (\r\n    <form onSubmit={searchSubmit}>\r\n      <span className=\"input-group-text\">\r\n        <div className=\"input-group\">\r\n          <div className=\"input-group-prepend\">\r\n            <select className=\"btn me-2\" onChange={handleChange(\"category\")}>\r\n              <option defaultValue value=\"All\">\r\n                All\r\n              </option>\r\n              {categories.map((c, i) => (\r\n                <option key={i} value={c._id}>\r\n                  {c.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <input\r\n            type=\"search\"\r\n            className=\"form-control\"\r\n            onChange={handleChange(\"search\")}\r\n            placeholder=\"search by name\"\r\n          />\r\n        </div>\r\n        <div className=\"btn input-group-apppend\" style={{ border: \"none\" }}>\r\n          <button className=\"input-group-text\">Search</button>\r\n        </div>\r\n      </span>\r\n    </form>\r\n  );\r\n\r\n  useEffect(() => {\r\n      loadCategories();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"container mb-3\">{searchForm()}</div>\r\n      <div className=\"container mb-3\">{searchedProducts(results)}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport { getProducts } from \"./apiCore\";\r\nimport Card from \"./Card\";\r\nimport Search from \"./Search\";\r\n\r\nconst Home = () => {\r\n  const [productsBySell, setProductsBySell] = useState([]);\r\n  const [productsByArrival, setProductsByArrival] = useState([]);\r\n  const [error, setError] = useState(false);\r\n\r\n  const loadProductBySell = () => {\r\n    getProducts(\"sold\").then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setProductsBySell(data);\r\n      }\r\n    });\r\n\r\n    if (error) {\r\n      console.log(error)\r\n    }\r\n  };\r\n\r\n  const loadProductByArrival = () => {\r\n    getProducts(\"createdAt\").then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setProductsByArrival(data);\r\n      }\r\n    });\r\n\r\n    if(error) {\r\n      console.log(error)\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadProductByArrival();\r\n    loadProductBySell();\r\n  }, []);\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Home Page\"\r\n      description=\"Node React E-commerce App\"\r\n      className=\"container\"\r\n    >\r\n      <Search />\r\n      <h2 className=\"mb-4\"> Best Sellers</h2>\r\n      <div className=\"row\">\r\n        {productsBySell.map((product, i) => (\r\n          <div key={i} className=\"col-4 mb-3\">\r\n            <Card key={i} product={product} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <h2 className=\"mb-4\"> Newest Products</h2>\r\n      <div className=\"row\">\r\n        {productsByArrival.map((product, i) => (\r\n          <div key={i} className=\"col-4 mb-3\">\r\n            <Card product={product} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { isAuthenticated } from \".\";\r\n\r\nconst PrivateRoute = ({component: Component, ...rest}) => (\r\n    <Route {...rest}  render={props => (isAuthenticated() ? (\r\n        <Component {...props} />\r\n    ) : (\r\n        <Redirect to={{\r\n            pathname: '/signin',\r\n            state: { from: props.location}\r\n        }} />\r\n    )) } />\r\n)\r\n\r\nexport default PrivateRoute","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getPurchaseHistory } from \"./apiUser\";\r\nimport moment from \"moment\";\r\n\r\nconst Dashboard = () => {\r\n  const [history, setHistory] = useState([]);\r\n\r\n  const {\r\n    user: { _id, name, email, role },\r\n  } = isAuthenticated();\r\n  const token = isAuthenticated().token;\r\n\r\n  const init = (userId, token) => {\r\n    //console.log(userId, token)\r\n    getPurchaseHistory(userId, token).then((data) => {\r\n      console.log(data)\r\n      if (data.error) {\r\n        console.log(data.error);\r\n      } else {\r\n        setHistory(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    init(_id, token);\r\n  }, []);\r\n\r\n  const userLinks = () => {\r\n    return (\r\n      <div className=\"card\">\r\n        <h4 className=\"card-header\">User Links</h4>\r\n        <ul className=\"list-group\">\r\n          <li className=\"list-group-item\">\r\n            <Link className=\"nav-link\" to=\"/cart\">\r\n              My Cart\r\n            </Link>\r\n          </li>\r\n          <li className=\"list-group-item\">\r\n            <Link className=\"nav-link\" to={`/profile/${_id}`}>\r\n              Update Profile\r\n            </Link>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const userInfo = () => {\r\n    return (\r\n      <div className=\"card mb-5\">\r\n        <h3 className=\"card-header\">User Information</h3>\r\n        <ul className=\"list-group\">\r\n          <li className=\"list-group-item\">{name}</li>\r\n          <li className=\"list-group-item\">{email}</li>\r\n          <li className=\"list-group-item\">\r\n            {role === 1 ? \"Admin\" : \"Registered User\"}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const purchaseHistory = (history) => {\r\n    return (\r\n      <div className=\"card mb-5\">\r\n        <h3 className=\"card-header\">Purchase history</h3>\r\n        <ul className=\"list-group\">\r\n          <li className=\"list-group-item\">\r\n            {history.map((h, i) => {\r\n              return (\r\n                <div key={i}>\r\n                  <hr />\r\n                  {h.products.map((p, i) => {\r\n                    return (\r\n                      <div key={i}>\r\n                        <h6>Product name: {p.name}</h6>\r\n                        <h6>Product price: {p.price}</h6>\r\n                        <h6>Purchased date: {moment(p.createdAt).fromNow()}</h6>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              );\r\n            })}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Dashboard\"\r\n      description={`G'day ${name}`}\r\n      className=\"container\"\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-3\">{userLinks()}</div>\r\n        <div className=\"col-9\">\r\n          {userInfo()}\r\n          {purchaseHistory(history)}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n","import { API } from \"../config\";\n\nexport const read = (userId, token) => {\n  return fetch(`${API}/user/${userId}`, {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .catch((err) => console.log(err));\n};\n\nexport const update = (userId, token, user) => {\n  return fetch(`${API}/user/${userId}`, {\n    method: \"PUT\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n    body: JSON.stringify(user),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .catch((err) => console.log(err));\n};\n\nexport const updateUser = (user, next) => {\n  if (typeof window !== \"undefined\") {\n    if (localStorage.getItem(\"jwt\")) {\n      let auth = JSON.parse(localStorage.getItem(\"jwt\"));\n      auth.user = user;\n      console.log(auth);\n      localStorage.setItem(\"jwt\", JSON.stringify(auth));\n      next();\n    }\n  }\n};\n\nexport const getPurchaseHistory = (userId, token) => {\n  return fetch(`${API}/orders/by/user/${userId}`, {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n  })\n    .then((res) => {\n      return res.json();\n    })\n    .catch((err) => console.log(err));\n};\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { isAuthenticated } from \".\";\r\n\r\nconst AdminRoute = ({ component: Component, ...rest }) => (\r\n  <Route\r\n    {...rest}\r\n    render={(props) =>\r\n      isAuthenticated() && isAuthenticated().user.role === 1 ? (\r\n        <Component {...props} />\r\n      ) : (\r\n        <Redirect\r\n          to={{\r\n            pathname: \"/signin\",\r\n            state: { from: props.location },\r\n          }}\r\n        />\r\n      )\r\n    }\r\n  />\r\n);\r\n\r\nexport default AdminRoute;","import React from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst AdminDashboard = () => {\r\n  const {\r\n    user: { name, email, role },\r\n  } = isAuthenticated();\r\n\r\n  const adminLinks = () => {\r\n    return (\r\n      <div className=\"card\">\r\n        <h4 className=\"card-header\">Admin Links</h4>\r\n        <ul className=\"list-group\">\r\n          <li className=\"list-group-item\">\r\n            <Link className=\"nav-link\" to=\"/create/category\">\r\n              Create Category\r\n            </Link>\r\n          </li>\r\n          <li className=\"list-group-item\">\r\n            <Link className=\"nav-link\" to=\"/create/product\">\r\n              Create Product\r\n            </Link>\r\n          </li>\r\n          <li className=\"list-group-item\">\r\n            <Link className=\"nav-link\" to=\"/admin/orders\">\r\n              View Orders\r\n            </Link>\r\n          </li>\r\n          <li className=\"list-group-item\">\r\n            <Link className=\"nav-link\" to=\"/admin/products\">\r\n              Manage Products\r\n            </Link>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const adminInfo = () => {\r\n    return (\r\n      <div className=\"card mb-5\">\r\n        <h3 className=\"card-header\">User Information</h3>\r\n        <ul className=\"list-group\">\r\n          <li className=\"list-group-item\">{name}</li>\r\n          <li className=\"list-group-item\">{email}</li>\r\n          <li className=\"list-group-item\">\r\n            {role === 1 ? \"Admin\" : \"Registered User\"}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Dashboard\"\r\n      description={`G'day ${name}`}\r\n      className=\"container\"\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-3\">{adminLinks()}</div>\r\n        <div className=\"col-9\">{adminInfo()}</div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;\r\n","import React, { useState } from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { createCategory } from \"./apiAdmin\";\r\n\r\n\r\nconst AddCategory = () => {\r\n  const [name, setName] = useState(\"\");\r\n  const [error, setError] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  //destructure user and token from localstorage\r\n\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const handleChange = (e) => {\r\n    setError(\"\");\r\n    setName(e.target.value);\r\n  };\r\n\r\n  const clickSubmit = (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setSuccess(false);\r\n    //make request to api to create a category\r\n    createCategory(user._id, token, { name }).then((data) => {\r\n     console.log(data)\r\n      if (data.error) {\r\n        setError(true);\r\n      } else {\r\n        setError(\"\");\r\n        setSuccess(true);\r\n      }\r\n    });\r\n  };\r\n\r\n  const showError = () => (\r\n    <div\r\n      className=\"alert alert-danger\"\r\n      style={{ display: error ? \"\" : \"none\" }}\r\n    >\r\n      <h3> Category should be unique </h3>\r\n    </div>\r\n  );\r\n\r\n  const showSuccess = () =>\r\n    success && (\r\n      <div className=\"alert alert-success\">\r\n        <h3>{name} was created</h3>\r\n      </div>\r\n    );\r\n\r\n  const goBack = () => (\r\n    <div className=\"mt-5\">\r\n      <Link to=\"/admin/dashboard\" className=\"text-warning\">\r\n        Back to Dashboard\r\n      </Link>\r\n    </div>\r\n  );\r\n\r\n  const newCatergory = () => (\r\n    <div className=\"row\">\r\n      <div className=\"col-md-8 offset-md-2\">\r\n        <form>\r\n          <div className=\"form-group\">\r\n            <label className=\"text-mute\"></label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              onChange={handleChange}\r\n              value={name}\r\n              autoFocus\r\n              required\r\n            />\r\n            <button\r\n              className=\"btn btn-outline-primary mt-2\"\r\n              onClick={clickSubmit}\r\n            >\r\n              Create Category\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n  return (\r\n    <Layout\r\n      title=\"Add a new category\"\r\n      description={`G'day ${user.name}, ready to add a new category?`}\r\n      className=\"container\"\r\n    >\r\n      {showError()}\r\n      {showSuccess()}\r\n      {newCatergory()}\r\n      {goBack()}\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AddCategory;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth\";\r\n// import { Link } from \"react-router-dom\";\r\nimport { createProduct } from \"./apiAdmin\";\r\nimport { getCategories } from \"./apiAdmin\";\r\n\r\nconst AddProduct = () => {\r\n  const [values, setValues] = useState({\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    categories: [],\r\n    category: \"\",\r\n    shipping: \"\",\r\n    quantity: \"\",\r\n    photo: \"\",\r\n    loading: false,\r\n    error: \"\",\r\n    createdProduct: \"\",\r\n    redirectToProfile: false,\r\n    formData: \"\",\r\n  });\r\n\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const {\r\n    name,\r\n    description,\r\n    price,\r\n    categories,\r\n    // category,\r\n    // shipping,\r\n    quantity,\r\n    loading,\r\n    error,\r\n    createdProduct,\r\n    // redirectToProfile,\r\n    formData,\r\n  } = values;\r\n\r\n  useEffect(() => {\r\n    //load categories and set form data\r\n    const init = () => {\r\n      getCategories().then((data) => {\r\n        if (data.error) {\r\n          setValues({ ...values, error: data.error });\r\n        } else {\r\n          setValues({ ...values, categories: data, formData: new FormData() });\r\n        }\r\n      });\r\n    };\r\n    init();\r\n  }, []);\r\n\r\n  const handleChange = (name) => (event) => {\r\n    const value = name === \"photo\" ? event.target.files[0] : event.target.value;\r\n    formData.set(name, value);\r\n    setValues({ ...values, [name]: value });\r\n  };\r\n\r\n  const clickSubmit = (e) => {\r\n    e.preventDefault();\r\n    setValues({ ...values, error: \"\", loading: true });\r\n\r\n    createProduct(user._id, token, formData).then((data) => {\r\n      if (data.error) {\r\n        setValues({ ...values, error: data.error });\r\n      } else {\r\n        setValues({\r\n          ...values,\r\n          name: \"\",\r\n          description: \"\",\r\n          price: \"\",\r\n          shipping: \"\",\r\n          quantity: \"\",\r\n          photo: \"\",\r\n          loading: false,\r\n          createdProduct: data.name,\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  const newPostform = () => (\r\n    <form className=\"mb-3\" onSubmit={clickSubmit}>\r\n      <h4>Post Photo</h4>\r\n      <div className=\"form-group\">\r\n        <label className=\"btn btn-secondary\">\r\n          <input\r\n            type=\"file\"\r\n            name=\"photo\"\r\n            accept=\"image/*\"\r\n            onChange={handleChange(\"photo\")}\r\n            required\r\n          />\r\n        </label>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\"> Name </label>\r\n        <input\r\n          className=\"form-control\"\r\n          value={name}\r\n          onChange={handleChange(\"name\")}\r\n          type=\"text\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Description</label>\r\n        <textarea\r\n          className=\"form-control\"\r\n          value={description}\r\n          onChange={handleChange(\"description\")}\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Price</label>\r\n        <input\r\n          className=\"form-control\"\r\n          value={price}\r\n          onChange={handleChange(\"price\")}\r\n          type=\"number\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Category</label>\r\n        <select\r\n          className=\"form-control\"\r\n          onChange={handleChange(\"category\")}\r\n          required\r\n        >\r\n          <option defaultValue>---- Please Select ----</option>\r\n          {categories &&\r\n            categories.map((c, i) => (\r\n              <option key={i} value={c._id}>\r\n                {c.name}\r\n              </option>\r\n            ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\"> Quantity </label>\r\n        <input\r\n          className=\"form-control\"\r\n          value={quantity}\r\n          onChange={handleChange(\"quantity\")}\r\n          type=\"number\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\"> Shipping </label>\r\n        <select\r\n          className=\"form-control\"\r\n          onChange={handleChange(\"shipping\")}\r\n          required\r\n        >\r\n          <option defaultValue>---- Please Select ----</option>\r\n          <option value=\"0\">No, its online!</option>\r\n          <option value=\"1\">Yes, there is!</option>\r\n        </select>\r\n      </div>\r\n      <button className=\"btn btn-outline-primary\">Create Product</button>\r\n    </form>\r\n  );\r\n\r\n  const showError = () => (\r\n    <div\r\n      className=\"alert alert-danger\"\r\n      style={{ display: error ? \"\" : \"none\" }}\r\n    >\r\n      <h3> {error} </h3>\r\n    </div>\r\n  );\r\n\r\n  const showSuccess = () =>\r\n    createdProduct && (\r\n      <div className=\"alert alert-success\">\r\n        <h3>{createdProduct} was created</h3>\r\n      </div>\r\n    );\r\n\r\n  const showLoading = () =>\r\n    loading && (\r\n      <div className=\"alert alert-info\">\r\n        <h3>Loading...</h3>\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Add a new category\"\r\n      description={`G'day ${user.name}, ready to add a new category?`}\r\n      className=\"container\"\r\n    >\r\n      {showError()}\r\n      {showSuccess()}\r\n      {showLoading()}\r\n      {newPostform()}\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AddProduct;\r\n","import React, { useState } from \"react\";\r\nimport { getCategories } from \"../admin/apiAdmin\";\r\n\r\nconst Checkbox = ({ categories, handleFilters }) => {\r\n  const [checked, setChecked] = useState([]);\r\n\r\n  const handleToggle = (c) => () => {\r\n    const currentCategoryId = checked.indexOf(c);\r\n    //console.log(currentCategoryId);\r\n    const newCheckedCategoryId = [...checked];\r\n\r\n    if (currentCategoryId === -1) {\r\n      //console.log('adicionou')\r\n      //console.log(c)\r\n      newCheckedCategoryId.push(c);\r\n    } else {\r\n      // console.log(\"Eliminou\");\r\n      newCheckedCategoryId.splice(currentCategoryId, 1);\r\n    }\r\n    //console.log(newCheckedCategoryId);\r\n    setChecked(newCheckedCategoryId);\r\n    handleFilters(newCheckedCategoryId)\r\n  };\r\n\r\n  // console.log({categories})\r\n  return categories.map((c, i) => (\r\n    <li key={i} className=\"list-unstyled\">\r\n      <input\r\n        type=\"checkbox\"\r\n        value={checked.indexOf(c._id === -1)}\r\n        className=\"form-check-input\"\r\n        onChange={handleToggle(c)}\r\n      />\r\n      <label className=\"form-check-label ms-2\">{c.name} </label>\r\n    </li>\r\n  ));\r\n};\r\n\r\nexport default Checkbox;\r\n","import React, { useState } from \"react\";\r\n\r\nconst Radiobox = ({ prices, handleFilters }) => {\r\n  const [value, setValue] = useState(0);\r\n\r\n\r\n  const handleChange = (e) => {\r\n      handleFilters(e.target.value)\r\n      setValue(e.target.value)\r\n  }\r\n\r\n  return prices.map((p, i) => (\r\n    <div key={i} className=\"list-unstyled ms-4\">\r\n      <input\r\n        type=\"radio\"\r\n        value={`${p._id}`}\r\n        name={p}\r\n        className=\"form-check-input\"\r\n        onChange={handleChange}\r\n      />\r\n      <label className=\"form-check-label ms-2\">{p.name} </label>\r\n    </div>\r\n  ));\r\n};\r\n\r\nexport default Radiobox;\r\n","export const prices = [\r\n    {\r\n        _id: 0,\r\n        name: \"Any\",\r\n        array: []\r\n    },\r\n    {\r\n        _id: 1,\r\n        name: \"0$ to 9$\",\r\n        array: [0, 9]\r\n    },\r\n    {\r\n        _id: 2,\r\n        name: \"10$ to 19$\",\r\n        array: [10, 19]\r\n    },\r\n    {\r\n        _id: 3,\r\n        name: \"20$ to 29$\",\r\n        array: [20, 29]\r\n    },\r\n    {\r\n        _id: 4,\r\n        name: \"30$ to 39$\",\r\n        array: [30, 39]\r\n    },\r\n    {\r\n        _id: 4,\r\n        name: \"More than 40$\",\r\n        array: [40, 599999]\r\n    }\r\n]","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport Card from \"./Card\";\r\nimport { getCategories } from \"../admin/apiAdmin\";\r\nimport { getFilteredProducts } from \"./apiCore\";\r\nimport Checkbox from \"./Checkbox\";\r\nimport Radiobox from \"./Radiobox\";\r\nimport { prices } from \"./fixedPrices\";\r\n\r\nconst Shop = () => {\r\n  const [myFilters, setMyFilters] = useState({\r\n    filters: { category: [], price: [] },\r\n  });\r\n  const [categories, setCategories] = useState([]);\r\n  const [error, setError] = useState(false);\r\n  const [limit, setLimit] = useState(6);\r\n  const [skip, setSkip] = useState(0);\r\n  const [filteredResults, setFilteredResults] = useState([]);\r\n  const [size, setSize] = useState(0);\r\n\r\n  const init = () => {\r\n    getCategories().then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setCategories(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  const loadFilteredResults = (newFilters) => {\r\n    // console.log(newFilters);\r\n    getFilteredProducts(skip, limit, newFilters).then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setFilteredResults(data.data);\r\n        setSize(data.size);\r\n        setSkip(0);\r\n      }\r\n    });\r\n  };\r\n\r\n  const loadMore = (newFilters) => {\r\n    let toSkip = skip + limit;\r\n    // console.log(newFilters);\r\n    getFilteredProducts(toSkip, myFilters.filters).then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setFilteredResults([...filteredResults, ...data.data]);\r\n        setSize(data.size);\r\n        setSkip(toSkip);\r\n      }\r\n    });\r\n  };\r\n\r\n  const loadMoreButton = () => {\r\n    return (\r\n      size > 0 &&\r\n      size >= limit && (\r\n        <button onClick={loadMore} className=\"btn btn-warning mb-5\">\r\n          Load More\r\n        </button>\r\n      )\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    init();\r\n    loadFilteredResults(skip, limit, myFilters.filters);\r\n  }, []);\r\n\r\n  const handleFilters = (filters, filterBy) => {\r\n    // console.log(\"SHOP\", filters, filterBy);\r\n    const newFilters = { ...myFilters };\r\n    newFilters.filters[filterBy] = filters;\r\n\r\n    if (filterBy === \"price\") {\r\n      let priceValues = handlePrice(filters);\r\n      newFilters.filters[filterBy] = priceValues;\r\n    }\r\n    loadFilteredResults(myFilters.filters);\r\n    setMyFilters(newFilters);\r\n  };\r\n\r\n  const handlePrice = (value) => {\r\n    const data = prices;\r\n    let array = [];\r\n\r\n    for (let key in data) {\r\n      if (data[key]._id === parseInt(value)) {\r\n        array = data[key].array;\r\n      }\r\n    }\r\n    return array;\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Shop Page\"\r\n      description=\"Search and find books of your choice\"\r\n      className=\"container-fluid\"\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-4\">\r\n          <h4>Filter by categories</h4>\r\n          <ul>\r\n            <Checkbox\r\n              categories={categories}\r\n              handleFilters={(filters) => handleFilters(filters, \"category\")}\r\n            />\r\n          </ul>\r\n\r\n          <h4>Filter by price range</h4>\r\n          <div className=\"ms-2\">\r\n            <Radiobox\r\n              prices={prices}\r\n              handleFilters={(filters) => handleFilters(filters, \"price\")}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-8\">\r\n          <h2 className=\"mb-4\">Products</h2>\r\n          <div className=\"row\">\r\n            {filteredResults.map((product, i) => (\r\n              <div key={i} className=\"col-4 mb-3\">\r\n                <Card product={product} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <hr />\r\n          {loadMoreButton()}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Shop;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport Card from \"./Card\";\r\nimport { read, listRelated } from \"./apiCore\";\r\n\r\nconst Product = (props) => {\r\n  const [product, setProduct] = useState({});\r\n  const [error, setError] = useState(false);\r\n  const [relatedProduct, setRelatedProduct] = useState([]);\r\n\r\n  const loadSingleProduct = (productId) => {\r\n    read(productId).then((data) => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setProduct(data);\r\n\r\n        // fetch related products\r\n        listRelated(data._id).then((data) => {\r\n          if (data.error) {\r\n            setError(data.error);\r\n          } else {\r\n            setRelatedProduct(data);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const productId = props.match.params.productId;\r\n    loadSingleProduct(productId);\r\n  }, [props]);\r\n\r\n  return (\r\n    <Layout\r\n      title={product.name}\r\n      description={\r\n        product && product.description && product.description.substring(0, 100)\r\n      }\r\n      className=\"container\"\r\n    >\r\n      <h2 className=\"mb-4\">Single Product</h2>\r\n      <div className=\"row\">\r\n        <div className=\"col-8\">\r\n          {product && product.description && (\r\n            <Card product={product} showViewbutton={false} />\r\n          )}\r\n        </div>\r\n        <div className=\"col-4\">\r\n          <h4>Related products</h4>\r\n          {console.log(relatedProduct)}\r\n          {relatedProduct.map((p, i) => (\r\n            <div key={i} className=\"mb-3\">\r\n              <Card product={p} />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Product;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  getProducts,\r\n  getBraintreeClientToken,\r\n  processPayment,\r\n  createOrder,\r\n} from \"./apiCore\";\r\nimport { emptyCart } from \"./cartHelpers\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { Link } from \"react-router-dom\";\r\nimport DropIn from \"braintree-web-drop-in-react\";\r\n\r\nconst Checkout = ({ products, setRun = (f) => f, run = undefined }) => {\r\n  const [data, setData] = useState({\r\n    loading: false,\r\n    success: false,\r\n    clientToken: null,\r\n    error: \"\",\r\n    instance: {},\r\n    address: \"\",\r\n  });\r\n\r\n  const userId = isAuthenticated() && isAuthenticated().user._id;\r\n  const token = isAuthenticated() && isAuthenticated().token;\r\n\r\n  const getToken = (userId, token) => {\r\n    getBraintreeClientToken(userId, token).then((data) => {\r\n      if (data.error) {\r\n        //console.log(data.error);\r\n        setData({ ...data, error: data.error });\r\n      } else {\r\n        //console.log(data);\r\n        setData({ clientToken: data.clientToken });\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getToken(userId, token);\r\n  }, []);\r\n\r\n  const handleAddress = (event) => {\r\n    setData({ ...data, address: event.target.value });\r\n  };\r\n\r\n  const getTotal = () => {\r\n    return products.reduce((currentValue, nextValue) => {\r\n      return currentValue + nextValue.count * nextValue.price;\r\n    }, 0);\r\n  };\r\n\r\n  const showCheckout = () => {\r\n    return isAuthenticated() ? (\r\n      <div>{showDropIn()}</div>\r\n    ) : (\r\n      <Link to=\"/signin\">\r\n        <button className=\"btn btn-primary\">Sign in to checkout</button>\r\n      </Link>\r\n    );\r\n  };\r\n\r\n  let deliveryAddress = data.address;\r\n\r\n  const buy = () => {\r\n    setData({ loading: true });\r\n    // send the nonce to your server\r\n    let nonce;\r\n    // nonce = data.instance.requestPaymentMethod();\r\n    let getNonce = data.instance\r\n\r\n      .requestPaymentMethod()\r\n      .then((data) => {\r\n        // console.log(data);\r\n        nonce = data.nonce;\r\n        // once you have nonce (card type, card number) send nonce as 'paymentMethodNonce'\r\n        // and also total to be charged\r\n        // console.log(\r\n        //   \"send nonce and total to process: \",\r\n        //   nonce,\r\n        //   getTotal(products)\r\n        // );\r\n        const paymentData = {\r\n          paymentMethodNonce: nonce,\r\n          amount: getTotal(products),\r\n        };\r\n\r\n        processPayment(userId, token, paymentData)\r\n          .then((response) => {\r\n            // console.log(response);\r\n            // empty cart\r\n            // create order\r\n\r\n            const createOrderData = {\r\n              products: products,\r\n              transaction_id: response.transaction.id,\r\n              amount: response.transaction.amount,\r\n              address: deliveryAddress,\r\n            };\r\n\r\n            createOrder(userId, token, createOrderData)\r\n              .then((response) => {\r\n                emptyCart(() => {\r\n                  setRun(!run); // run useEffect in parent Cart\r\n                  // console.log(\"payment success and empty cart\");\r\n                  setData({\r\n                    loading: false,\r\n                    success: true,\r\n                  });\r\n                });\r\n              })\r\n              .catch((error) => {\r\n                console.log(error);\r\n                setData({ loading: false });\r\n              });\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n            setData({ loading: false });\r\n          });\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"dropin error: \", error);\r\n        setData({ ...data, error: error.message });\r\n      });\r\n  };\r\n\r\n  const showDropIn = () => (\r\n    <div onBlur={() => setData({ ...data, error: \"\" })}>\r\n      {data.clientToken !== null && products.length > 0 ? (\r\n        <div>\r\n          <div className=\"gorm-group mb-3\">\r\n            <label className=\"text-muted\">Delivery address:</label>\r\n            <textarea\r\n              onChange={handleAddress}\r\n              className=\"form-control\"\r\n              value={data.address}\r\n              placeholder=\"Type your delivery address here...\"\r\n            />\r\n          </div>\r\n          <DropIn\r\n            options={{\r\n              authorization: data.clientToken,\r\n              paypal: { flow: \"vault\" },\r\n            }}\r\n            onInstance={(instance) => (data.instance = instance)}\r\n          />\r\n          <button onClick={buy} className=\"btn btn-success btn-block\">\r\n            Pay\r\n          </button>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n\r\n  const showError = (error) => (\r\n    <div\r\n      className=\"alert alert-danger\"\r\n      style={{ display: error ? \"\" : \"none\" }}\r\n    >\r\n      {error}\r\n    </div>\r\n  );\r\n\r\n  const showSuccess = (success) =>\r\n    success && (\r\n      <div className=\"alert alert-success\">\r\n        <h3>Thanks! Your payment was successful!</h3>\r\n      </div>\r\n    );\r\n\r\n  const showLoading = (loading) =>\r\n    loading && <h2 className=\"text-danger\">Loading...</h2>;\r\n\r\n  return (\r\n    <div>\r\n      <h2>{`Total: ${getTotal()}`}</h2>\r\n      {showLoading(data.loading)}\r\n      {showSuccess(data.success)}\r\n      {showError(data.error)}\r\n      {showCheckout()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getCart, removeItem } from \"./cartHelpers\";\r\nimport Card from \"./Card\";\r\nimport Checkout from \"./Checkout\";\r\n\r\nconst Cart = () => {\r\n  const [items, setItems] = useState([]);\r\n  // const [cartSize, setCartSize] = useState([]);\r\n  const [run, setRun] = useState(false);\r\n\r\n  useEffect(() => {\r\n    console.log(\"MAX DEPTH ...\");\r\n    setItems(getCart());\r\n  }, [run]);\r\n\r\n  const showItems = (items) => {\r\n    return (\r\n      <div>\r\n        <h2>Your cart has {`${items.length}`} items</h2>\r\n        <hr />\r\n        {items.map((product, i) => (\r\n          <Card\r\n            key={i}\r\n            product={product}\r\n            showCartButton={false}\r\n            cartUpdate={true}\r\n            showRemoveProductButton={true}\r\n            setRun={setRun}\r\n            run={run}\r\n            // changeCartSize={changeCartSize}\r\n          />\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const noItemsMessage = () => (\r\n    <h2>\r\n      Your Cart is empty. <br />\r\n      <Link to=\"/shop\"> Continue shopping. </Link>\r\n    </h2>\r\n  );\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Shopping Cart\"\r\n      description=\"Checkout now!\"\r\n      className=\"container-fluid\"\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-6\">\r\n          {items.length > 0 ? showItems(items) : noItemsMessage()}\r\n        </div>\r\n        <div className=\"col-6\">\r\n          <h2 className=\"mb-4\">Your Cart Summary</h2>\r\n          <hr />\r\n          <Checkout products={items} />\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n","import React, { useState, useEffect } from \"react\";\nimport Layout from \"../core/Layout\";\nimport { isAuthenticated } from \"../auth\";\nimport { listOrders, getStatusValues, updateOrderStatus } from \"./apiAdmin\";\nimport moment from \"moment\";\n\nconst Orders = () => {\n  const [orders, setOrders] = useState([]);\n  const [statusValues, setStatusValues] = useState([]);\n\n  const { user, token } = isAuthenticated();\n\n  const loadOrders = () => {\n    listOrders(user._id, token).then((data) => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setOrders(data);\n      }\n    });\n  };\n\n  const loadStatusValues = () => {\n    getStatusValues(user._id, token).then((data) => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setStatusValues(data);\n      }\n    });\n  };\n\n  useEffect(() => {\n    loadOrders();\n    loadStatusValues();\n  }, []);\n\n  const showOrdersLength = () => {\n    if (orders.length > 0) {\n      return (\n        <h1 className=\"text-danger display-2\">Total orders: {orders.length}</h1>\n      );\n    } else {\n      return <h1 className=\"text-danger\">No orders</h1>;\n    }\n  };\n\n  const showInput = (key, value) => (\n    <div className=\"input-group mb-2 mr-sm-2\">\n      <div className=\"input-group-prepend\">\n        <div className=\"input-group-text\">{key}</div>\n      </div>\n      <input type=\"text\" value={value} className=\"form-control\" readOnly />\n    </div>\n  );\n\n  const handleStatusChange = (e, orderId) => {\n    updateOrderStatus(user._id, token, orderId, e.target.value).then((data) => {\n      if (data.error) {\n        console.log(\"Status update failed\");\n      } else {\n        loadOrders();\n      }\n    });\n  };\n\n  const showStatus = (o) => (\n    <div className=\"form-group\">\n      <h3 className=\"mark mb-4\">Status: {o.status}</h3>\n      <select\n        className=\"form-control\"\n        onChange={(e) => handleStatusChange(e, o._id)}\n      >\n        <option>Update Status</option>\n        {statusValues.map((status, index) => (\n          <option key={index} value={status}>\n            {status}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n\n  return (\n    <Layout\n      title=\"Orders\"\n      description={`G'day ${user.name}, you can manage all the orders here`}\n      className=\"container-fluid\"\n    >\n      <div className=\"row\">\n        <div className=\"col-md-8 offset-md-2\">\n          {showOrdersLength()}\n          {console.log(orders)}\n          {orders.map((o, oIndex) => {\n            //console.log(o);\n            return (\n              <div\n                className=\"mt-5\"\n                key={oIndex}\n                style={{ borderBottom: \"5px solid indigo\" }}\n              >\n                <h2 className=\"mb-5\">\n                  <span className=\"bg-primary\">Order ID: {o._id}</span>\n                </h2>\n\n                <ul className=\"list-group mb-2\">\n                  <li className=\"list-group-item\">{showStatus(o)}</li>\n                  <li className=\"list-group-item\">\n                    Transaction ID: {o.transaction_id}\n                  </li>\n                  <li className=\"list-group-item\">Amount: {`${o.amount}`}</li>\n                  <li className=\"list-group-item\">Ordered by: {o.user.name}</li>\n                  <li className=\"list-group-item\">\n                    Ordered on: {moment(o.createdAt).fromNow()}\n                  </li>\n                  <li className=\"list-group-item\">\n                    Delivery address: {o.address}\n                  </li>\n                </ul>\n\n                <h3 className=\"mt-4 mb-4 font-italic\">\n                  Total products in the order: {o.products.length}\n                </h3>\n\n                {o.products.map((p, pIndex) => (\n                  <div\n                    className=\"mb-4\"\n                    key={pIndex}\n                    style={{\n                      padding: \"20px\",\n                      border: \"1px solid indigo\",\n                    }}\n                  >\n                    {showInput(\"Product name\", p.name)}\n                    {showInput(\"Product price\", p.price)}\n                    {showInput(\"Product total\", p.count)}\n                    {showInput(\"Product Id\", p._id)}\n                  </div>\n                ))}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default Orders;\n","import React, { useState, useEffect } from \"react\";\nimport Layout from \"../core/Layout\";\nimport { isAuthenticated } from \"../auth\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { read, update, updateUser } from \"./apiUser\";\n\nconst Profile = ({ match }) => {\n  console.log(match);\n  const [values, setValues] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    error: false,\n    success: false,\n  });\n\n  const { token } = isAuthenticated();\n  const { name, email, password, error, success } = values;\n\n  const init = (userId) => {\n    // console.log(userId);\n    read(userId, token).then((data) => {\n      if (data.error) {\n        setValues({ ...values, error: true });\n      } else {\n        setValues({ ...values, name: data.name, email: data.email });\n      }\n    });\n  };\n\n  useEffect(() => {\n    init(match.params.userId);\n  }, []);\n\n  const handleChange = (name) => (e) => {\n    setValues({ ...values, error: false, [name]: e.target.value });\n  };\n\n  const clickSubmit = (e) => {\n    e.preventDefault();\n    update(match.params.userId, token, { name, email, password }).then(\n      (data) => {\n        if (data.error) {\n          console.log(data.error);\n        } else {\n          updateUser(data, () => {\n            setValues({\n              ...values,\n              name: data.name,\n              email: data.email,\n              success: true,\n            });\n          });\n        }\n      }\n    );\n  };\n\n  const redirectUser = (success) => {\n    if (success) {\n      return <Redirect to=\"/cart\" />;\n    }\n  };\n\n  const profileUpdate = (name, email, password) => (\n    <form>\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Name</label>\n        <input\n          type=\"text\"\n          onChange={handleChange(\"name\")}\n          className=\"form-control\"\n          value={name}\n        />\n      </div>\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Email</label>\n        <input\n          type=\"email\"\n          onChange={handleChange(\"email\")}\n          className=\"form-control\"\n          value={email}\n        />\n      </div>\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Password</label>\n        <input\n          type=\"password\"\n          onChange={handleChange(\"password\")}\n          className=\"form-control\"\n          value={password}\n        />\n      </div>\n\n      <button onClick={clickSubmit} className=\"btn btn-primary\">\n        Submit\n      </button>\n    </form>\n  );\n\n  return (\n    <Layout\n      title=\"Profile\"\n      description=\"Update your profile\"\n      className=\"container-fluid\"\n    >\n      <h2 className=\"mb-4\">Profile update</h2>\n      {profileUpdate(name, email, password)}\n      {redirectUser(success)}\n      {JSON.stringify(values)}\n    </Layout>\n  );\n};\n\nexport default Profile;\n","import React, { useState, useEffect } from \"react\";\nimport Layout from \"../core/Layout\";\nimport { isAuthenticated } from \"../auth\";\nimport { Link } from \"react-router-dom\";\nimport { getProducts, deleteProduct } from \"./apiAdmin\";\n\nconst ManageProducts = () => {\n  const [products, setProducts] = useState([]);\n\n  const { user, token } = isAuthenticated();\n\n  const loadProducts = () => {\n    getProducts().then((data) => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setProducts(data);\n      }\n    });\n  };\n\n  const destroy = (productId) => {\n    deleteProduct(productId, user._id, token).then((data) => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        loadProducts();\n      }\n    });\n  };\n\n  useEffect(() => {\n    loadProducts();\n  }, []);\n\n  return (\n    <Layout\n      title=\"Manage Products\"\n      description=\"Perform CRUD on products\"\n      className=\"container-fluid\"\n    >\n      <div className=\"row\">\n        <div className=\"col-12\">\n          <h2 className=\"text-center\">Total {products.length} products</h2>\n          <hr />\n          <ul className=\"list-group\">\n            {products.map((p, i) => (\n              <li\n                key={i}\n                className=\"list-group-item d-flex justify-content-between align-items-center\"\n              >\n                <strong>{p.name}</strong>\n                <Link\n                  className=\"btn position-relative\"\n                  to={`/admin/product/update/${p._id}`}\n                >\n                  <span className=\"position-absolute top-50 start-50 translate-middle badge rounded-pill bg-warning\">\n                    Update\n                  </span>\n                </Link>\n                <Link className=\"btn position-relative\">\n                  <span\n                    onClick={() => destroy(p._id)}\n                    className=\"position-absolute top-50 start-50 translate-middle badge rounded-pill bg-danger\"\n                  >\n                    Delete\n                  </span>\n                </Link>\n              </li>\n            ))}\n          </ul>\n          <br />\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default ManageProducts;\n","import React, { useState, useEffect } from \"react\";\nimport Layout from \"../core/Layout\";\nimport { isAuthenticated } from \"../auth\";\nimport { Redirect } from \"react-router-dom\";\nimport { getProduct, getCategories, updateProduct } from \"./apiAdmin\";\n\nconst UpdateProduct = ({ match }) => {\n  const [values, setValues] = useState({\n    name: \"\",\n    description: \"\",\n    price: \"\",\n    categories: [],\n    category: \"\",\n    shipping: \"\",\n    quantity: \"\",\n    photo: \"\",\n    loading: false,\n    error: false,\n    createdProduct: \"\",\n    redirectToProfile: false,\n    formData: \"\",\n  });\n\n  const { user, token } = isAuthenticated();\n  const {\n    name,\n    description,\n    price,\n    categories,\n    category,\n    shipping,\n    quantity,\n    loading,\n    error,\n    createdProduct,\n    redirectToProfile,\n    formData,\n  } = values;\n\n  const init = (productId) => {\n    getProduct(productId).then((data) => {\n      if (data.error) {\n        setValues({ ...values, error: data.error });\n      } else {\n        // populate the state\n        setValues({\n          ...values,\n          name: data.name,\n          description: data.description,\n          price: data.price,\n          category: data.category._id,\n          shipping: data.shipping,\n          quantity: data.quantity,\n          formData: new FormData(),\n        });\n        // load categories\n        initCategories();\n      }\n    });\n  };\n\n  // load categories and set form data\n  const initCategories = () => {\n    getCategories().then((data) => {\n      if (data.error) {\n        setValues({ ...values, error: data.error });\n      } else {\n        setValues({\n          categories: data,\n          formData: new FormData(),\n        });\n      }\n    });\n  };\n\n  useEffect(() => {\n    init(match.params.productId);\n  }, []);\n\n  const handleChange = (name) => (event) => {\n    const value = name === \"photo\" ? event.target.files[0] : event.target.value;\n    formData.set(name, value);\n    setValues({ ...values, [name]: value });\n  };\n\n  const clickSubmit = (event) => {\n    event.preventDefault();\n    setValues({ ...values, error: \"\", loading: true });\n\n    updateProduct(match.params.productId, user._id, token, formData).then(\n      (data) => {\n        if (data.error) {\n          setValues({ ...values, error: data.error });\n        } else {\n          setValues({\n            ...values,\n            name: \"\",\n            description: \"\",\n            photo: \"\",\n            price: \"\",\n            quantity: \"\",\n            loading: false,\n            error: false,\n            redirectToProfile: true,\n            createdProduct: data.name,\n          });\n        }\n      }\n    );\n  };\n\n  const newPostForm = () => (\n    <form className=\"mb-3\" onSubmit={clickSubmit}>\n      <h4>Post Photo</h4>\n      <div className=\"form-group\">\n        <label className=\"btn btn-secondary\">\n          <input\n            onChange={handleChange(\"photo\")}\n            type=\"file\"\n            name=\"photo\"\n            accept=\"image/*\"\n          />\n        </label>\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Name</label>\n        <input\n          onChange={handleChange(\"name\")}\n          type=\"text\"\n          className=\"form-control\"\n          value={name}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Description</label>\n        <textarea\n          onChange={handleChange(\"description\")}\n          className=\"form-control\"\n          value={description}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Price</label>\n        <input\n          onChange={handleChange(\"price\")}\n          type=\"number\"\n          className=\"form-control\"\n          value={price}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Category</label>\n        <select onChange={handleChange(\"category\")} className=\"form-control\">\n          <option>Please select</option>\n          {categories &&\n            categories.map((c, i) => (\n              <option key={i} value={c._id}>\n                {c.name}\n              </option>\n            ))}\n        </select>\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Shipping</label>\n        <select onChange={handleChange(\"shipping\")} className=\"form-control\">\n          <option>Please select</option>\n          <option value=\"0\">No, it's online!</option>\n          <option value=\"1\">Yes, there is!</option>\n        </select>\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Quantity</label>\n        <input\n          onChange={handleChange(\"quantity\")}\n          type=\"number\"\n          className=\"form-control\"\n          value={quantity}\n        />\n      </div>\n      <div className=\"d-grid gap-1 rouded-pills\">\n        <button className=\"btn btn-outline-primary mt-2 rounded-pill\">\n          Update Product\n        </button>\n      </div>\n    </form>\n  );\n\n  const showError = () => (\n    <div\n      className=\"alert alert-danger\"\n      style={{ display: error ? \"\" : \"none\" }}\n    >\n      {error}\n    </div>\n  );\n\n  const showSuccess = () => (\n    <div\n      className=\"alert alert-info\"\n      style={{ display: createdProduct ? \"\" : \"none\" }}\n    >\n      <h2>{`${createdProduct}`} is updated!</h2>\n    </div>\n  );\n\n  const showLoading = () =>\n    loading && (\n      <div className=\"alert alert-success\">\n        <h2>Loading...</h2>\n      </div>\n    );\n\n  const redirectUser = () => {\n    if (redirectToProfile) {\n      if (!error) {\n        return <Redirect to=\"/\" />;\n      }\n    }\n  };\n\n  return (\n    <Layout\n      title=\"Add a new product\"\n      description={`G'day ${user.name}, ready to add a new product?`}\n    >\n      <div className=\"row\">\n        <div className=\"col-md-8 offset-md-2\">\n          {showLoading()}\n          {showSuccess()}\n          {showError()}\n          {newPostForm()}\n          {/* {redirectUser()} */}\n          {console.log(name, description, price, category, shipping, quantity)}\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default UpdateProduct;\n","//import react from \"react\";\r\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\r\nimport Signup from \"./user/Signup\";\r\nimport Signin from \"./user/Signin\";\r\nimport Home from \"./core/Home\";\r\nimport PrivateRoute from \"./auth/PrivateRoute\";\r\nimport Dashboard from \"./user/UserDashboard\";\r\nimport AdminRoute from \"./auth/AdminRoute\";\r\nimport AdminDashboard from \"./user/AdminDashboard\";\r\nimport AddCategory from \"./admin/AddCategory\";\r\nimport AddProduct from \"./admin/AddProduct\";\r\nimport Shop from \"./core/Shop\";\r\nimport Product from \"./core/Product\";\r\nimport Cart from \"./core/Cart\";\r\nimport Orders from \"./admin/Orders\";\r\nimport Profile from \"./user/Profile\";\r\nimport ManageProducts from \"./admin/ManageProducts\";\r\nimport UpdateProduct from \"./admin/UpdateProduct\";\r\n\r\nconst Routes = () => {\r\n  return (\r\n    <BrowserRouter>\r\n      <Switch>\r\n        <Route path=\"/\" exact component={Home} />\r\n        <Route path=\"/shop\" exact component={Shop} />\r\n        <Route path=\"/cart\" exact component={Cart} />\r\n        <Route path=\"/product/:productId\" exact component={Product} />\r\n        <Route path=\"/signin\" exact component={Signin} />\r\n        <Route path=\"/signup\" exact component={Signup} />\r\n        <PrivateRoute path=\"/user/dashboard\" exact component={Dashboard} />\r\n        <AdminRoute path=\"/admin/dashboard\" exact component={AdminDashboard} />\r\n        <AdminRoute path=\"/create/category\" exact component={AddCategory} />\r\n        <AdminRoute path=\"/create/product\" exact component={AddProduct} />\r\n        <AdminRoute path=\"/admin/orders\" exact component={Orders} />\r\n        <PrivateRoute path=\"/profile/:userId\" exact component={Profile} />\r\n        <AdminRoute path=\"/admin/products\" exact component={ManageProducts} />\r\n        <AdminRoute\r\n          path=\"/admin/product/update/:productId\"\r\n          exact\r\n          component={UpdateProduct}\r\n        />\r\n      </Switch>\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n//import App from \"./App\";\nimport Routes from \"./Routes\";\n\nReactDOM.render(<Routes />, document.getElementById(\"root\"));\n"],"sourceRoot":""}